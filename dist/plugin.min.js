"use strict";function parallax(e,t){window.requestAnimationFrame(function(){var r=getElementOffset(t),a=r+t.offsetHeight;window.pageYOffset>r&&window.pageYOffset<a?e.style.transform="translate3d(0, "+.2*(window.pageYOffset-r)+"px, 0)":e.style.transform="translate3d(0, 0px, 0)"})}function getElementOffset(e){var t=0,r=e;do t+=r.offsetTop||0,r=r.offsetParent;while(r);return t}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var parallaxImgSection=document.querySelectorAll(".danzerpress-section .danzerpress-parallax"),parallaxImgTitle=document.querySelector(".danzerpress-title-area .danzerpress-parallax");parallaxImgSection.forEach(function(e){document.addEventListener("scroll",function(){parallax(e,e.closest(".danzerpress-section"))})}),parallaxImgTitle&&document.addEventListener("scroll",function(){parallax(parallaxImgTitle,parallaxImgTitle.closest(".danzerpress-title-area"))});var _createClass=function(){function e(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,r,a){return r&&e(t.prototype,r),a&&e(t,a),t}}(),Slider=function(){function e(){_classCallCheck(this,e),this.height=0,this.sliderNumber=3,this.sliderWrap=document.querySelector(".danzerpress-slider-wrap"),this.slider=document.querySelector(".danzerpress-slider"),this.createPagination(),this.handleSlider()}return _createClass(e,[{key:"createPagination",value:function(){var e=this,t='\n            <div class="danzerpress-slider-pagination">\n                <ul>\n                </ul>\n            </div>\n        ';console.log(this.slider.children.length),console.log(this.sliderNumber);for(var r=(new DOMParser).parseFromString(t,"text/html").body.firstChild,a=0;a<this.slider.children.length;a++)if(a>this.sliderNumber){var i=document.createElement("li");r.children[0].append(i),i.classList.add("active"),i.addEventListener("click",function(t){var r=document.querySelectorAll(".danzerpress-slider div.active"),a=document.querySelectorAll(".danzerpress-slider-pagination ul li");e.setActiveStuff(r),e.setActiveStuff(a),t.target.classList.add("active")})}this.sliderWrap.append(r)}},{key:"handleSlider",value:function(){for(var e=0;e<this.slider.children.length;e++){var t=this.slider.children[e],r=t.offsetHeight;r>this.height&&(this.height=r),t.style.position="absolute",t.classList.add("slider-child"),t.classList.add("active")}this.slider.style.height=this.height+"px"}},{key:"setActiveStuff",value:function(e){e&&e.forEach(function(e){e.classList.remove("active")})}}]),e}();new Slider;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1haW4uanMiLCJwYXJhbGxheC5qcyIsInNsaWRlci5qcyJdLCJuYW1lcyI6WyJwYXJhbGxheCIsInBhcmFsbGF4SW1nIiwic2VjdGlvblBhcmVudCIsIndpbmRvdyIsInJlcXVlc3RBbmltYXRpb25GcmFtZSIsInNlY3Rpb25QYXJlbnRUb3AiLCJnZXRFbGVtZW50T2Zmc2V0IiwicGFyZW50T2Zmc2V0Qm90dG9tIiwib2Zmc2V0SGVpZ2h0IiwicGFnZVlPZmZzZXQiLCJzdHlsZSIsInRyYW5zZm9ybSIsImVsIiwidG9wIiwiZWxlbWVudCIsIm9mZnNldFRvcCIsIm9mZnNldFBhcmVudCIsIl9jbGFzc0NhbGxDaGVjayIsImluc3RhbmNlIiwiQ29uc3RydWN0b3IiLCJUeXBlRXJyb3IiLCJwYXJhbGxheEltZ1NlY3Rpb24iLCJkb2N1bWVudCIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJwYXJhbGxheEltZ1RpdGxlIiwicXVlcnlTZWxlY3RvciIsImZvckVhY2giLCJhZGRFdmVudExpc3RlbmVyIiwiY2xvc2VzdCIsIl9jcmVhdGVDbGFzcyIsImRlZmluZVByb3BlcnRpZXMiLCJ0YXJnZXQiLCJwcm9wcyIsImkiLCJsZW5ndGgiLCJkZXNjcmlwdG9yIiwiZW51bWVyYWJsZSIsImNvbmZpZ3VyYWJsZSIsIndyaXRhYmxlIiwiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJrZXkiLCJwcm90b1Byb3BzIiwic3RhdGljUHJvcHMiLCJwcm90b3R5cGUiLCJTbGlkZXIiLCJ0aGlzIiwiaGVpZ2h0Iiwic2xpZGVyTnVtYmVyIiwic2xpZGVyV3JhcCIsInNsaWRlciIsImNyZWF0ZVBhZ2luYXRpb24iLCJoYW5kbGVTbGlkZXIiLCJ2YWx1ZSIsIl90aGlzIiwic2xpZGVyUGFnaW5hdGlvbiIsImNvbnNvbGUiLCJsb2ciLCJjaGlsZHJlbiIsImRvYyIsIkRPTVBhcnNlciIsInBhcnNlRnJvbVN0cmluZyIsImJvZHkiLCJmaXJzdENoaWxkIiwiYnV0dG9uIiwiY3JlYXRlRWxlbWVudCIsImFwcGVuZCIsImNsYXNzTGlzdCIsImFkZCIsImUiLCJhY3RpdmVEaXYiLCJhY3RpdmVMaSIsInNldEFjdGl2ZVN0dWZmIiwiY2hpbGQiLCJpdGVtSGVpZ2h0IiwicG9zaXRpb24iLCJ0aGluZyIsImRpdiIsInJlbW92ZSJdLCJtYXBwaW5ncyI6IkFBQUEsWUNrQkEsU0FBU0EsVUFBU0MsRUFBYUMsR0FDM0JDLE9BQU9DLHNCQUFzQixXQUN6QixHQUFJQyxHQUFtQkMsaUJBQWlCSixHQUN4Q0ssRUFBcUJGLEVBQW1CSCxFQUFjTSxZQUVsREwsUUFBT00sWUFBY0osR0FBb0JGLE9BQU9NLFlBQWNGLEVBQzlETixFQUFZUyxNQUFNQyxVQUFZLGtCQUErRCxJQUF6Q1IsT0FBT00sWUFBY0osR0FBMEIsU0FFbkdKLEVBQVlTLE1BQU1DLFVBQVksMkJBSzFDLFFBQVNMLGtCQUFpQk0sR0FDdEIsR0FBSUMsR0FBTSxFQUNOQyxFQUFVRixDQUlkLEdBQ0lDLElBQU9DLEVBQVFDLFdBQWEsRUFDNUJELEVBQVVBLEVBQVFFLG1CQUNiRixFQUVULE9BQU9ELEdEU1gsUUFBU0ksaUJBQWdCQyxFQUFVQyxHQUFlLEtBQU1ELFlBQW9CQyxJQUFnQixLQUFNLElBQUlDLFdBQVUscUNDaERoSCxHQUFJQyxvQkFBcUJDLFNBQVNDLGlCQUFpQiw4Q0FDL0NDLGlCQUFtQkYsU0FBU0csY0FBYyxnREFFOUNKLG9CQUFtQkssUUFBUSxTQUFBekIsR0FDdkJxQixTQUFTSyxpQkFBaUIsU0FBVSxXQUNoQzNCLFNBQVNDLEVBQWFBLEVBQVkyQixRQUFRLDZCQUk5Q0osa0JBQ0FGLFNBQVNLLGlCQUFpQixTQUFVLFdBQ2hDM0IsU0FBU3dCLGlCQUFrQkEsaUJBQWlCSSxRQUFRLDZCRG1DNUQsSUFBSUMsY0FBZSxXQUFjLFFBQVNDLEdBQWlCQyxFQUFRQyxHQUFTLElBQUssR0FBSUMsR0FBSSxFQUFHQSxFQUFJRCxFQUFNRSxPQUFRRCxJQUFLLENBQUUsR0FBSUUsR0FBYUgsRUFBTUMsRUFBSUUsR0FBV0MsV0FBYUQsRUFBV0MsYUFBYyxFQUFPRCxFQUFXRSxjQUFlLEVBQVUsU0FBV0YsS0FBWUEsRUFBV0csVUFBVyxHQUFNQyxPQUFPQyxlQUFlVCxFQUFRSSxFQUFXTSxJQUFLTixJQUFpQixNQUFPLFVBQVVoQixFQUFhdUIsRUFBWUMsR0FBaUosTUFBOUhELElBQVlaLEVBQWlCWCxFQUFZeUIsVUFBV0YsR0FBaUJDLEdBQWFiLEVBQWlCWCxFQUFhd0IsR0FBcUJ4QixNRWpEMWhCMEIsT0ZxRE8sV0VwRFQsUUFBQUEsS0FDQTVCLGdCQUFBNkIsS0FBQUQsR0FDSUMsS0FBS0MsT0FBUyxFQUNkRCxLQUFLRSxhQUFlLEVBQ3BCRixLQUFLRyxXQUFhM0IsU0FBU0csY0FBYyw0QkFDekNxQixLQUFLSSxPQUFTNUIsU0FBU0csY0FBYyx1QkFDckNxQixLQUFLSyxtQkFDTEwsS0FBS00sZUZtSFQsTUExREF2QixjQUFhZ0IsSUFDVEosSUFBSyxtQkFDTFksTUFBTyxXRXZEWCxHQUFBQyxHQUFBUixLQUNRUyxFQUFBQSxzSUFPSkMsU0FBUUMsSUFBSVgsS0FBS0ksT0FBT1EsU0FBU3hCLFFBQ2pDc0IsUUFBUUMsSUFBSVgsS0FBS0UsYUFFakIsS0FBSyxHQUREVyxJQUFNLEdBQUlDLFlBQVlDLGdCQUFnQk4sRUFBa0IsYUFBYU8sS0FBS0MsV0FDckU5QixFQUFJLEVBQUdBLEVBQUlhLEtBQUtJLE9BQU9RLFNBQVN4QixPQUFRRCxJQUU3QyxHQUFJQSxFQUFJYSxLQUFLRSxhQUFjLENBQ3ZCLEdBQUlnQixHQUFTMUMsU0FBUzJDLGNBQWMsS0FDcENOLEdBQUlELFNBQVMsR0FBR1EsT0FBT0YsR0FDdkJBLEVBQU9HLFVBQVVDLElBQUksVUFFckJKLEVBQU9yQyxpQkFBaUIsUUFBUyxTQUFDMEMsR0FDOUIsR0FBSUMsR0FBWWhELFNBQVNDLGlCQUFpQixrQ0FDdENnRCxFQUFXakQsU0FBU0MsaUJBQWlCLHVDQUV6QytCLEdBQUtrQixlQUFlRixHQUNwQmhCLEVBQUtrQixlQUFlRCxHQUVwQkYsRUFBRXRDLE9BQU9vQyxVQUFVQyxJQUFJLFlBSW5DdEIsS0FBS0csV0FBV2lCLE9BQU9QLE1GdUR2QmxCLElBQUssZUFDTFksTUFBTyxXRW5EUCxJQUFLLEdBQUlwQixHQUFJLEVBQUdBLEVBQUlhLEtBQUtJLE9BQU9RLFNBQVN4QixPQUFRRCxJQUFLLENBQ2xELEdBQUl3QyxHQUFRM0IsS0FBS0ksT0FBT1EsU0FBU3pCLEdBQzdCeUMsRUFBYUQsRUFBTWpFLFlBRW5Ca0UsR0FBYTVCLEtBQUtDLFNBQ2xCRCxLQUFLQyxPQUFTMkIsR0FHbEJELEVBQU0vRCxNQUFNaUUsU0FBVyxXQUN2QkYsRUFBTU4sVUFBVUMsSUFBSSxnQkFDcEJLLEVBQU1OLFVBQVVDLElBQUksVUFFeEJ0QixLQUFLSSxPQUFPeEMsTUFBTXFDLE9BQVNELEtBQUtDLE9BQVMsUUZ1RHpDTixJQUFLLGlCQUNMWSxNQUFPLFNFckRJdUIsR0FFUEEsR0FDQUEsRUFBTWxELFFBQVEsU0FBQ21ELEdBQ1hBLEVBQUlWLFVBQVVXLE9BQU8sZ0JGMEQxQmpDLElFckRYLElBQUlBIiwiZmlsZSI6Im1haW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyIndXNlIHN0cmljdCc7XG5cbi8qKlxuICogUGFyYWxsYXggU2Nyb2xsaW5nXG4gKi9cbnZhciBwYXJhbGxheEltZ1NlY3Rpb24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuZGFuemVycHJlc3Mtc2VjdGlvbiAuZGFuemVycHJlc3MtcGFyYWxsYXgnKSxcbiAgICBwYXJhbGxheEltZ1RpdGxlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmRhbnplcnByZXNzLXRpdGxlLWFyZWEgLmRhbnplcnByZXNzLXBhcmFsbGF4Jyk7XG5cbnBhcmFsbGF4SW1nU2VjdGlvbi5mb3JFYWNoKGZ1bmN0aW9uIChwYXJhbGxheEltZykge1xuICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJzY3JvbGxcIiwgZnVuY3Rpb24gKCkge1xuICAgICAgICBwYXJhbGxheChwYXJhbGxheEltZywgcGFyYWxsYXhJbWcuY2xvc2VzdCgnLmRhbnplcnByZXNzLXNlY3Rpb24nKSk7XG4gICAgfSk7XG59KTtcblxuaWYgKHBhcmFsbGF4SW1nVGl0bGUpIHtcbiAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwic2Nyb2xsXCIsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcGFyYWxsYXgocGFyYWxsYXhJbWdUaXRsZSwgcGFyYWxsYXhJbWdUaXRsZS5jbG9zZXN0KCcuZGFuemVycHJlc3MtdGl0bGUtYXJlYScpKTtcbiAgICB9KTtcbn1cblxuZnVuY3Rpb24gcGFyYWxsYXgocGFyYWxsYXhJbWcsIHNlY3Rpb25QYXJlbnQpIHtcbiAgICB3aW5kb3cucmVxdWVzdEFuaW1hdGlvbkZyYW1lKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIHNlY3Rpb25QYXJlbnRUb3AgPSBnZXRFbGVtZW50T2Zmc2V0KHNlY3Rpb25QYXJlbnQpLFxuICAgICAgICAgICAgcGFyZW50T2Zmc2V0Qm90dG9tID0gc2VjdGlvblBhcmVudFRvcCArIHNlY3Rpb25QYXJlbnQub2Zmc2V0SGVpZ2h0O1xuXG4gICAgICAgIGlmICh3aW5kb3cucGFnZVlPZmZzZXQgPiBzZWN0aW9uUGFyZW50VG9wICYmIHdpbmRvdy5wYWdlWU9mZnNldCA8IHBhcmVudE9mZnNldEJvdHRvbSkge1xuICAgICAgICAgICAgcGFyYWxsYXhJbWcuc3R5bGUudHJhbnNmb3JtID0gJ3RyYW5zbGF0ZTNkKDAsICcgKyAod2luZG93LnBhZ2VZT2Zmc2V0IC0gc2VjdGlvblBhcmVudFRvcCkgKiAuMiArICdweCwgMCknO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcGFyYWxsYXhJbWcuc3R5bGUudHJhbnNmb3JtID0gJ3RyYW5zbGF0ZTNkKDAsIDBweCwgMCknO1xuICAgICAgICB9XG4gICAgfSk7XG59XG5cbmZ1bmN0aW9uIGdldEVsZW1lbnRPZmZzZXQoZWwpIHtcbiAgICB2YXIgdG9wID0gMDtcbiAgICB2YXIgZWxlbWVudCA9IGVsO1xuXG4gICAgLy8gTG9vcCB0aHJvdWdoIHRoZSBET00gdHJlZVxuICAgIC8vIGFuZCBhZGQgaXQncyBwYXJlbnQncyBvZmZzZXQgdG8gZ2V0IHBhZ2Ugb2Zmc2V0XG4gICAgZG8ge1xuICAgICAgICB0b3AgKz0gZWxlbWVudC5vZmZzZXRUb3AgfHwgMDtcbiAgICAgICAgZWxlbWVudCA9IGVsZW1lbnQub2Zmc2V0UGFyZW50O1xuICAgIH0gd2hpbGUgKGVsZW1lbnQpO1xuXG4gICAgcmV0dXJuIHRvcDtcbn1cblwidXNlIHN0cmljdFwiO1xuJ3VzZSBzdHJpY3QnO1xuXG52YXIgX2NyZWF0ZUNsYXNzID0gZnVuY3Rpb24gKCkgeyBmdW5jdGlvbiBkZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCwgcHJvcHMpIHsgZm9yICh2YXIgaSA9IDA7IGkgPCBwcm9wcy5sZW5ndGg7IGkrKykgeyB2YXIgZGVzY3JpcHRvciA9IHByb3BzW2ldOyBkZXNjcmlwdG9yLmVudW1lcmFibGUgPSBkZXNjcmlwdG9yLmVudW1lcmFibGUgfHwgZmFsc2U7IGRlc2NyaXB0b3IuY29uZmlndXJhYmxlID0gdHJ1ZTsgaWYgKFwidmFsdWVcIiBpbiBkZXNjcmlwdG9yKSBkZXNjcmlwdG9yLndyaXRhYmxlID0gdHJ1ZTsgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwgZGVzY3JpcHRvci5rZXksIGRlc2NyaXB0b3IpOyB9IH0gcmV0dXJuIGZ1bmN0aW9uIChDb25zdHJ1Y3RvciwgcHJvdG9Qcm9wcywgc3RhdGljUHJvcHMpIHsgaWYgKHByb3RvUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IucHJvdG90eXBlLCBwcm90b1Byb3BzKTsgaWYgKHN0YXRpY1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLCBzdGF0aWNQcm9wcyk7IHJldHVybiBDb25zdHJ1Y3RvcjsgfTsgfSgpO1xuXG5mdW5jdGlvbiBfY2xhc3NDYWxsQ2hlY2soaW5zdGFuY2UsIENvbnN0cnVjdG9yKSB7IGlmICghKGluc3RhbmNlIGluc3RhbmNlb2YgQ29uc3RydWN0b3IpKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb25cIik7IH0gfVxuXG52YXIgU2xpZGVyID0gZnVuY3Rpb24gKCkge1xuICAgIGZ1bmN0aW9uIFNsaWRlcigpIHtcbiAgICAgICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIFNsaWRlcik7XG5cbiAgICAgICAgdGhpcy5oZWlnaHQgPSAwO1xuICAgICAgICB0aGlzLnNsaWRlck51bWJlciA9IDM7XG4gICAgICAgIHRoaXMuc2xpZGVyV3JhcCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5kYW56ZXJwcmVzcy1zbGlkZXItd3JhcCcpO1xuICAgICAgICB0aGlzLnNsaWRlciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5kYW56ZXJwcmVzcy1zbGlkZXInKTtcbiAgICAgICAgdGhpcy5jcmVhdGVQYWdpbmF0aW9uKCk7XG4gICAgICAgIHRoaXMuaGFuZGxlU2xpZGVyKCk7XG4gICAgfVxuXG4gICAgX2NyZWF0ZUNsYXNzKFNsaWRlciwgW3tcbiAgICAgICAga2V5OiAnY3JlYXRlUGFnaW5hdGlvbicsXG4gICAgICAgIHZhbHVlOiBmdW5jdGlvbiBjcmVhdGVQYWdpbmF0aW9uKCkge1xuICAgICAgICAgICAgdmFyIF90aGlzID0gdGhpcztcblxuICAgICAgICAgICAgdmFyIHNsaWRlclBhZ2luYXRpb24gPSAnXFxuICAgICAgICAgICAgPGRpdiBjbGFzcz1cImRhbnplcnByZXNzLXNsaWRlci1wYWdpbmF0aW9uXCI+XFxuICAgICAgICAgICAgICAgIDx1bD5cXG4gICAgICAgICAgICAgICAgPC91bD5cXG4gICAgICAgICAgICA8L2Rpdj5cXG4gICAgICAgICc7XG5cbiAgICAgICAgICAgIGNvbnNvbGUubG9nKHRoaXMuc2xpZGVyLmNoaWxkcmVuLmxlbmd0aCk7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyh0aGlzLnNsaWRlck51bWJlcik7XG4gICAgICAgICAgICB2YXIgZG9jID0gbmV3IERPTVBhcnNlcigpLnBhcnNlRnJvbVN0cmluZyhzbGlkZXJQYWdpbmF0aW9uLCAndGV4dC9odG1sJykuYm9keS5maXJzdENoaWxkO1xuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLnNsaWRlci5jaGlsZHJlbi5sZW5ndGg7IGkrKykge1xuXG4gICAgICAgICAgICAgICAgaWYgKGkgPiB0aGlzLnNsaWRlck51bWJlcikge1xuICAgICAgICAgICAgICAgICAgICB2YXIgYnV0dG9uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnbGknKTtcbiAgICAgICAgICAgICAgICAgICAgZG9jLmNoaWxkcmVuWzBdLmFwcGVuZChidXR0b24pO1xuICAgICAgICAgICAgICAgICAgICBidXR0b24uY2xhc3NMaXN0LmFkZCgnYWN0aXZlJyk7XG5cbiAgICAgICAgICAgICAgICAgICAgYnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBhY3RpdmVEaXYgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuZGFuemVycHJlc3Mtc2xpZGVyIGRpdi5hY3RpdmUnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBhY3RpdmVMaSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5kYW56ZXJwcmVzcy1zbGlkZXItcGFnaW5hdGlvbiB1bCBsaScpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBfdGhpcy5zZXRBY3RpdmVTdHVmZihhY3RpdmVEaXYpO1xuICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMuc2V0QWN0aXZlU3R1ZmYoYWN0aXZlTGkpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBlLnRhcmdldC5jbGFzc0xpc3QuYWRkKCdhY3RpdmUnKTtcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5zbGlkZXJXcmFwLmFwcGVuZChkb2MpO1xuICAgICAgICB9XG4gICAgfSwge1xuICAgICAgICBrZXk6ICdoYW5kbGVTbGlkZXInLFxuICAgICAgICB2YWx1ZTogZnVuY3Rpb24gaGFuZGxlU2xpZGVyKCkge1xuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLnNsaWRlci5jaGlsZHJlbi5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgIHZhciBjaGlsZCA9IHRoaXMuc2xpZGVyLmNoaWxkcmVuW2ldO1xuICAgICAgICAgICAgICAgIHZhciBpdGVtSGVpZ2h0ID0gY2hpbGQub2Zmc2V0SGVpZ2h0O1xuXG4gICAgICAgICAgICAgICAgaWYgKGl0ZW1IZWlnaHQgPiB0aGlzLmhlaWdodCkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmhlaWdodCA9IGl0ZW1IZWlnaHQ7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgY2hpbGQuc3R5bGUucG9zaXRpb24gPSAnYWJzb2x1dGUnO1xuICAgICAgICAgICAgICAgIGNoaWxkLmNsYXNzTGlzdC5hZGQoJ3NsaWRlci1jaGlsZCcpO1xuICAgICAgICAgICAgICAgIGNoaWxkLmNsYXNzTGlzdC5hZGQoJ2FjdGl2ZScpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5zbGlkZXIuc3R5bGUuaGVpZ2h0ID0gdGhpcy5oZWlnaHQgKyAncHgnO1xuICAgICAgICB9XG4gICAgfSwge1xuICAgICAgICBrZXk6ICdzZXRBY3RpdmVTdHVmZicsXG4gICAgICAgIHZhbHVlOiBmdW5jdGlvbiBzZXRBY3RpdmVTdHVmZih0aGluZykge1xuICAgICAgICAgICAgaWYgKHRoaW5nKSB7XG4gICAgICAgICAgICAgICAgdGhpbmcuZm9yRWFjaChmdW5jdGlvbiAoZGl2KSB7XG4gICAgICAgICAgICAgICAgICAgIGRpdi5jbGFzc0xpc3QucmVtb3ZlKCdhY3RpdmUnKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1dKTtcblxuICAgIHJldHVybiBTbGlkZXI7XG59KCk7XG5cbm5ldyBTbGlkZXIoKTsiLCIvKipcbiAqIFBhcmFsbGF4IFNjcm9sbGluZ1xuICovXG52YXIgcGFyYWxsYXhJbWdTZWN0aW9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmRhbnplcnByZXNzLXNlY3Rpb24gLmRhbnplcnByZXNzLXBhcmFsbGF4JyksXG4gICAgcGFyYWxsYXhJbWdUaXRsZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5kYW56ZXJwcmVzcy10aXRsZS1hcmVhIC5kYW56ZXJwcmVzcy1wYXJhbGxheCcpO1xuXG5wYXJhbGxheEltZ1NlY3Rpb24uZm9yRWFjaChwYXJhbGxheEltZyA9PiB7XG4gICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcInNjcm9sbFwiLCAoKSA9PiB7XG4gICAgICAgIHBhcmFsbGF4KHBhcmFsbGF4SW1nLCBwYXJhbGxheEltZy5jbG9zZXN0KCcuZGFuemVycHJlc3Mtc2VjdGlvbicpKTtcbiAgICB9KTtcbn0pO1xuXG5pZiAocGFyYWxsYXhJbWdUaXRsZSkge1xuICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJzY3JvbGxcIiwgKCkgPT4ge1xuICAgICAgICBwYXJhbGxheChwYXJhbGxheEltZ1RpdGxlLCBwYXJhbGxheEltZ1RpdGxlLmNsb3Nlc3QoJy5kYW56ZXJwcmVzcy10aXRsZS1hcmVhJykpO1xuICAgIH0pO1xufSBcblxuZnVuY3Rpb24gcGFyYWxsYXgocGFyYWxsYXhJbWcsIHNlY3Rpb25QYXJlbnQpIHtcbiAgICB3aW5kb3cucmVxdWVzdEFuaW1hdGlvbkZyYW1lKCgpID0+IHtcbiAgICAgICAgdmFyIHNlY3Rpb25QYXJlbnRUb3AgPSBnZXRFbGVtZW50T2Zmc2V0KHNlY3Rpb25QYXJlbnQpLFxuICAgICAgICBwYXJlbnRPZmZzZXRCb3R0b20gPSBzZWN0aW9uUGFyZW50VG9wICsgc2VjdGlvblBhcmVudC5vZmZzZXRIZWlnaHQ7XG5cbiAgICAgICAgaWYgKHdpbmRvdy5wYWdlWU9mZnNldCA+IHNlY3Rpb25QYXJlbnRUb3AgJiYgd2luZG93LnBhZ2VZT2Zmc2V0IDwgcGFyZW50T2Zmc2V0Qm90dG9tKSB7XG4gICAgICAgICAgICBwYXJhbGxheEltZy5zdHlsZS50cmFuc2Zvcm0gPSAndHJhbnNsYXRlM2QoMCwgJyArICgod2luZG93LnBhZ2VZT2Zmc2V0IC0gc2VjdGlvblBhcmVudFRvcCkgKiAuMikgKyAncHgsIDApJztcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHBhcmFsbGF4SW1nLnN0eWxlLnRyYW5zZm9ybSA9ICd0cmFuc2xhdGUzZCgwLCAwcHgsIDApJztcbiAgICAgICAgfVxuICAgIH0pO1xufVxuXG5mdW5jdGlvbiBnZXRFbGVtZW50T2Zmc2V0KGVsKSB7XG4gICAgbGV0IHRvcCA9IDA7XG4gICAgbGV0IGVsZW1lbnQgPSBlbDtcblxuICAgIC8vIExvb3AgdGhyb3VnaCB0aGUgRE9NIHRyZWVcbiAgICAvLyBhbmQgYWRkIGl0J3MgcGFyZW50J3Mgb2Zmc2V0IHRvIGdldCBwYWdlIG9mZnNldFxuICAgIGRvIHtcbiAgICAgICAgdG9wICs9IGVsZW1lbnQub2Zmc2V0VG9wIHx8IDA7XG4gICAgICAgIGVsZW1lbnQgPSBlbGVtZW50Lm9mZnNldFBhcmVudDtcbiAgICB9IHdoaWxlIChlbGVtZW50KTtcblxuICAgIHJldHVybiB0b3A7XG59IiwiY2xhc3MgU2xpZGVyIHtcbiAgICBjb25zdHJ1Y3RvcigpIFxuICAgIHtcbiAgICAgICAgdGhpcy5oZWlnaHQgPSAwO1xuICAgICAgICB0aGlzLnNsaWRlck51bWJlciA9IDM7XG4gICAgICAgIHRoaXMuc2xpZGVyV3JhcCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5kYW56ZXJwcmVzcy1zbGlkZXItd3JhcCcpO1xuICAgICAgICB0aGlzLnNsaWRlciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5kYW56ZXJwcmVzcy1zbGlkZXInKTtcbiAgICAgICAgdGhpcy5jcmVhdGVQYWdpbmF0aW9uKCk7XG4gICAgICAgIHRoaXMuaGFuZGxlU2xpZGVyKCk7XG4gICAgfVxuXG4gICAgY3JlYXRlUGFnaW5hdGlvbigpXG4gICAge1xuICAgICAgICBsZXQgc2xpZGVyUGFnaW5hdGlvbiA9IGBcbiAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJkYW56ZXJwcmVzcy1zbGlkZXItcGFnaW5hdGlvblwiPlxuICAgICAgICAgICAgICAgIDx1bD5cbiAgICAgICAgICAgICAgICA8L3VsPlxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgIGA7XG5cbiAgICAgICAgY29uc29sZS5sb2codGhpcy5zbGlkZXIuY2hpbGRyZW4ubGVuZ3RoKTtcbiAgICAgICAgY29uc29sZS5sb2codGhpcy5zbGlkZXJOdW1iZXIpO1xuICAgICAgICBsZXQgZG9jID0gbmV3IERPTVBhcnNlcigpLnBhcnNlRnJvbVN0cmluZyhzbGlkZXJQYWdpbmF0aW9uLCAndGV4dC9odG1sJykuYm9keS5maXJzdENoaWxkO1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMuc2xpZGVyLmNoaWxkcmVuLmxlbmd0aDsgaSsrKSB7XG5cbiAgICAgICAgICAgIGlmIChpID4gdGhpcy5zbGlkZXJOdW1iZXIpIHtcbiAgICAgICAgICAgICAgICBsZXQgYnV0dG9uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnbGknKTtcbiAgICAgICAgICAgICAgICBkb2MuY2hpbGRyZW5bMF0uYXBwZW5kKGJ1dHRvbik7XG4gICAgICAgICAgICAgICAgYnV0dG9uLmNsYXNzTGlzdC5hZGQoJ2FjdGl2ZScpO1xuXG4gICAgICAgICAgICAgICAgYnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgbGV0IGFjdGl2ZURpdiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5kYW56ZXJwcmVzcy1zbGlkZXIgZGl2LmFjdGl2ZScpO1xuICAgICAgICAgICAgICAgICAgICBsZXQgYWN0aXZlTGkgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuZGFuemVycHJlc3Mtc2xpZGVyLXBhZ2luYXRpb24gdWwgbGknKTtcblxuICAgICAgICAgICAgICAgICAgICB0aGlzLnNldEFjdGl2ZVN0dWZmKGFjdGl2ZURpdik7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc2V0QWN0aXZlU3R1ZmYoYWN0aXZlTGkpO1xuXG4gICAgICAgICAgICAgICAgICAgIGUudGFyZ2V0LmNsYXNzTGlzdC5hZGQoJ2FjdGl2ZScpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHRoaXMuc2xpZGVyV3JhcC5hcHBlbmQoZG9jKTtcbiAgICB9XG5cbiAgICBoYW5kbGVTbGlkZXIoKSBcbiAgICB7XG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5zbGlkZXIuY2hpbGRyZW4ubGVuZ3RoOyBpKyspIHsgICAgICAgIFxuICAgICAgICAgICAgbGV0IGNoaWxkID0gdGhpcy5zbGlkZXIuY2hpbGRyZW5baV07XG4gICAgICAgICAgICBsZXQgaXRlbUhlaWdodCA9IGNoaWxkLm9mZnNldEhlaWdodDtcblxuICAgICAgICAgICAgaWYgKGl0ZW1IZWlnaHQgPiB0aGlzLmhlaWdodCkge1xuICAgICAgICAgICAgICAgIHRoaXMuaGVpZ2h0ID0gaXRlbUhlaWdodDtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgY2hpbGQuc3R5bGUucG9zaXRpb24gPSAnYWJzb2x1dGUnO1xuICAgICAgICAgICAgY2hpbGQuY2xhc3NMaXN0LmFkZCgnc2xpZGVyLWNoaWxkJyk7XG4gICAgICAgICAgICBjaGlsZC5jbGFzc0xpc3QuYWRkKCdhY3RpdmUnKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnNsaWRlci5zdHlsZS5oZWlnaHQgPSB0aGlzLmhlaWdodCArICdweCc7XG4gICAgfVxuXG4gICAgc2V0QWN0aXZlU3R1ZmYodGhpbmcpIFxuICAgIHtcbiAgICAgICAgaWYgKHRoaW5nKSB7XG4gICAgICAgICAgICB0aGluZy5mb3JFYWNoKChkaXYpID0+IHtcbiAgICAgICAgICAgICAgICBkaXYuY2xhc3NMaXN0LnJlbW92ZSgnYWN0aXZlJyk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH1cbn1cbm5ldyBTbGlkZXIoKTsiXSwic291cmNlUm9vdCI6Ii9zb3VyY2UvIn0=
