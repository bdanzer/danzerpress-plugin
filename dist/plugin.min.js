"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var _createClass=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),Parallax=function(){function e(){_classCallCheck(this,e),this.parallaxItems=document.querySelectorAll(".danzerpress-parallax"),this.navHeight=document.querySelector("header").offsetHeight,this.init()}return _createClass(e,[{key:"init",value:function(){var e=this;document.addEventListener("scroll",function(){window.requestAnimationFrame(function(){e.scrollHandler()})})}},{key:"getElementOffset",value:function(e){var t=0,r=e;do t+=r.offsetTop||0,r=r.offsetParent;while(r);return t}},{key:"scrollHandler",value:function(){var e=this;this.parallaxItems.forEach(function(t){var r=t.parentElement,n=e.getElementOffset(r),i=n+r.offsetHeight,a=0!==e.getElementOffset(t)?window.pageYOffset+e.navHeight:window.pageYOffset;a>n&&a<i?t.style.transform="translate3d(0, "+.6*(a-n)+"px, 0)":t.style.transform="translate3d(0, 0px, 0)"})}}]),e}();new Parallax;var _createClass=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),Slider=function(){function e(){_classCallCheck(this,e),this.height=0,this.sliderNumber=3,this.sliderWrap=document.querySelector(".danzerpress-slider-wrap"),this.slider=document.querySelector(".danzerpress-slider"),this.slider&&(this.createPagination(),this.handleSlider())}return _createClass(e,[{key:"createPagination",value:function(){for(var e=this,t='\n            <div class="danzerpress-slider-pagination">\n                <ul>\n                </ul>\n            </div>\n        ',r=(new DOMParser).parseFromString(t,"text/html").body.firstChild,n=0;n<this.slider.children.length;n++)if(n>this.sliderNumber){var i=document.createElement("li");r.children[0].append(i),i.classList.add("active"),i.addEventListener("click",function(t){var r=document.querySelectorAll(".danzerpress-slider div.active"),n=document.querySelectorAll(".danzerpress-slider-pagination ul li");e.setActiveStuff(r),e.setActiveStuff(n),t.target.classList.add("active")})}this.sliderWrap.append(r)}},{key:"handleSlider",value:function(){for(var e=0;e<this.slider.children.length;e++){var t=this.slider.children[e],r=t.offsetHeight;r>this.height&&(this.height=r),t.style.position="absolute",t.classList.add("slider-child"),t.classList.add("active")}this.slider.style.height=this.height+"px"}},{key:"setActiveStuff",value:function(e){e&&e.forEach(function(e){e.classList.remove("active")})}}]),e}();new Slider;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1haW4uanMiLCJwYXJhbGxheC5qcyIsInNsaWRlci5qcyJdLCJuYW1lcyI6WyJfY2xhc3NDYWxsQ2hlY2siLCJpbnN0YW5jZSIsIkNvbnN0cnVjdG9yIiwiVHlwZUVycm9yIiwiX2NyZWF0ZUNsYXNzIiwiZGVmaW5lUHJvcGVydGllcyIsInRhcmdldCIsInByb3BzIiwiaSIsImxlbmd0aCIsImRlc2NyaXB0b3IiLCJlbnVtZXJhYmxlIiwiY29uZmlndXJhYmxlIiwid3JpdGFibGUiLCJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImtleSIsInByb3RvUHJvcHMiLCJzdGF0aWNQcm9wcyIsInByb3RvdHlwZSIsIlBhcmFsbGF4IiwidGhpcyIsInBhcmFsbGF4SXRlbXMiLCJkb2N1bWVudCIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJuYXZIZWlnaHQiLCJxdWVyeVNlbGVjdG9yIiwib2Zmc2V0SGVpZ2h0IiwiaW5pdCIsInZhbHVlIiwiX3RoaXMiLCJhZGRFdmVudExpc3RlbmVyIiwid2luZG93IiwicmVxdWVzdEFuaW1hdGlvbkZyYW1lIiwic2Nyb2xsSGFuZGxlciIsImVsIiwidG9wIiwiZWxlbWVudCIsIm9mZnNldFRvcCIsIm9mZnNldFBhcmVudCIsIl90aGlzMiIsImZvckVhY2giLCJwYXJhbGxheEl0ZW0iLCJzZWN0aW9uUGFyZW50IiwicGFyZW50RWxlbWVudCIsInNlY3Rpb25QYXJlbnRUb3AiLCJnZXRFbGVtZW50T2Zmc2V0IiwicGFyZW50T2Zmc2V0Qm90dG9tIiwid2luZG93SGVpZ2h0TmF2IiwicGFnZVlPZmZzZXQiLCJzdHlsZSIsInRyYW5zZm9ybSIsIlNsaWRlciIsImhlaWdodCIsInNsaWRlck51bWJlciIsInNsaWRlcldyYXAiLCJzbGlkZXIiLCJjcmVhdGVQYWdpbmF0aW9uIiwiaGFuZGxlU2xpZGVyIiwic2xpZGVyUGFnaW5hdGlvbiIsImRvYyIsIkRPTVBhcnNlciIsInBhcnNlRnJvbVN0cmluZyIsImJvZHkiLCJmaXJzdENoaWxkIiwiY2hpbGRyZW4iLCJidXR0b24iLCJjcmVhdGVFbGVtZW50IiwiYXBwZW5kIiwiY2xhc3NMaXN0IiwiYWRkIiwiZSIsImFjdGl2ZURpdiIsImFjdGl2ZUxpIiwic2V0QWN0aXZlU3R1ZmYiLCJjaGlsZCIsIml0ZW1IZWlnaHQiLCJwb3NpdGlvbiIsInRoaW5nIiwiZGl2IiwicmVtb3ZlIl0sIm1hcHBpbmdzIjoiQUFBQSxZQUlBLFNBQVNBLGlCQUFnQkMsRUFBVUMsR0FBZSxLQUFNRCxZQUFvQkMsSUFBZ0IsS0FBTSxJQUFJQyxXQUFVLHFDQWtFaEgsUUFBU0gsaUJBQWdCQyxFQUFVQyxHQUFlLEtBQU1ELFlBQW9CQyxJQUFnQixLQUFNLElBQUlDLFdBQVUscUNBcEVoSCxHQUFJQyxjQUFlLFdBQWMsUUFBU0MsR0FBaUJDLEVBQVFDLEdBQVMsSUFBSyxHQUFJQyxHQUFJLEVBQUdBLEVBQUlELEVBQU1FLE9BQVFELElBQUssQ0FBRSxHQUFJRSxHQUFhSCxFQUFNQyxFQUFJRSxHQUFXQyxXQUFhRCxFQUFXQyxhQUFjLEVBQU9ELEVBQVdFLGNBQWUsRUFBVSxTQUFXRixLQUFZQSxFQUFXRyxVQUFXLEdBQU1DLE9BQU9DLGVBQWVULEVBQVFJLEVBQVdNLElBQUtOLElBQWlCLE1BQU8sVUFBVVIsRUFBYWUsRUFBWUMsR0FBaUosTUFBOUhELElBQVlaLEVBQWlCSCxFQUFZaUIsVUFBV0YsR0FBaUJDLEdBQWFiLEVBQWlCSCxFQUFhZ0IsR0FBcUJoQixNQ0YxaEJrQixTRE1TLFdDTFgsUUFBQUEsS0FDQXBCLGdCQUFBcUIsS0FBQUQsR0FDSUMsS0FBS0MsY0FBZ0JDLFNBQVNDLGlCQUFpQix5QkFDL0NILEtBQUtJLFVBQVlGLFNBQVNHLGNBQWMsVUFBVUMsYUFDbEROLEtBQUtPLE9Ed0RULE1BOUNBeEIsY0FBYWdCLElBQ1RKLElBQUssT0FDTGEsTUFBTyxXQ1JYLEdBQUFDLEdBQUFULElBQ0lFLFVBQVNRLGlCQUFpQixTQUFVLFdBQ2hDQyxPQUFPQyxzQkFBc0IsV0FDekJILEVBQUtJLHVCRGVibEIsSUFBSyxt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RXpDckMsSUFBSyxpQkFDTGEsTUFBTyxTRXhFSWlELEdBRVBBLEdBQ0FBLEVBQU1yQyxRQUFRLFNBQUNzQyxHQUNYQSxFQUFJVixVQUFVVyxPQUFPLGdCRjZFMUI1QixJRXhFWCxJQUFJQSIsImZpbGUiOiJtYWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsiJ3VzZSBzdHJpY3QnO1xuXG52YXIgX2NyZWF0ZUNsYXNzID0gZnVuY3Rpb24gKCkgeyBmdW5jdGlvbiBkZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCwgcHJvcHMpIHsgZm9yICh2YXIgaSA9IDA7IGkgPCBwcm9wcy5sZW5ndGg7IGkrKykgeyB2YXIgZGVzY3JpcHRvciA9IHByb3BzW2ldOyBkZXNjcmlwdG9yLmVudW1lcmFibGUgPSBkZXNjcmlwdG9yLmVudW1lcmFibGUgfHwgZmFsc2U7IGRlc2NyaXB0b3IuY29uZmlndXJhYmxlID0gdHJ1ZTsgaWYgKFwidmFsdWVcIiBpbiBkZXNjcmlwdG9yKSBkZXNjcmlwdG9yLndyaXRhYmxlID0gdHJ1ZTsgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwgZGVzY3JpcHRvci5rZXksIGRlc2NyaXB0b3IpOyB9IH0gcmV0dXJuIGZ1bmN0aW9uIChDb25zdHJ1Y3RvciwgcHJvdG9Qcm9wcywgc3RhdGljUHJvcHMpIHsgaWYgKHByb3RvUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IucHJvdG90eXBlLCBwcm90b1Byb3BzKTsgaWYgKHN0YXRpY1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLCBzdGF0aWNQcm9wcyk7IHJldHVybiBDb25zdHJ1Y3RvcjsgfTsgfSgpO1xuXG5mdW5jdGlvbiBfY2xhc3NDYWxsQ2hlY2soaW5zdGFuY2UsIENvbnN0cnVjdG9yKSB7IGlmICghKGluc3RhbmNlIGluc3RhbmNlb2YgQ29uc3RydWN0b3IpKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb25cIik7IH0gfVxuXG52YXIgUGFyYWxsYXggPSBmdW5jdGlvbiAoKSB7XG4gICAgZnVuY3Rpb24gUGFyYWxsYXgoKSB7XG4gICAgICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBQYXJhbGxheCk7XG5cbiAgICAgICAgdGhpcy5wYXJhbGxheEl0ZW1zID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmRhbnplcnByZXNzLXBhcmFsbGF4Jyk7XG4gICAgICAgIHRoaXMubmF2SGVpZ2h0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignaGVhZGVyJykub2Zmc2V0SGVpZ2h0O1xuICAgICAgICB0aGlzLmluaXQoKTtcbiAgICB9XG5cbiAgICBfY3JlYXRlQ2xhc3MoUGFyYWxsYXgsIFt7XG4gICAgICAgIGtleTogJ2luaXQnLFxuICAgICAgICB2YWx1ZTogZnVuY3Rpb24gaW5pdCgpIHtcbiAgICAgICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG5cbiAgICAgICAgICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ3Njcm9sbCcsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICB3aW5kb3cucmVxdWVzdEFuaW1hdGlvbkZyYW1lKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgX3RoaXMuc2Nyb2xsSGFuZGxlcigpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICB9LCB7XG4gICAgICAgIGtleTogJ2dldEVsZW1lbnRPZmZzZXQnLFxuICAgICAgICB2YWx1ZTogZnVuY3Rpb24gZ2V0RWxlbWVudE9mZnNldChlbCkge1xuICAgICAgICAgICAgdmFyIHRvcCA9IDA7XG4gICAgICAgICAgICB2YXIgZWxlbWVudCA9IGVsO1xuXG4gICAgICAgICAgICAvLyBMb29wIHRocm91Z2ggdGhlIERPTSB0cmVlXG4gICAgICAgICAgICAvLyBhbmQgYWRkIGl0J3MgcGFyZW50J3Mgb2Zmc2V0IHRvIGdldCBwYWdlIG9mZnNldFxuICAgICAgICAgICAgZG8ge1xuICAgICAgICAgICAgICAgIHRvcCArPSBlbGVtZW50Lm9mZnNldFRvcCB8fCAwO1xuICAgICAgICAgICAgICAgIGVsZW1lbnQgPSBlbGVtZW50Lm9mZnNldFBhcmVudDtcbiAgICAgICAgICAgIH0gd2hpbGUgKGVsZW1lbnQpO1xuXG4gICAgICAgICAgICByZXR1cm4gdG9wO1xuICAgICAgICB9XG4gICAgfSwge1xuICAgICAgICBrZXk6ICdzY3JvbGxIYW5kbGVyJyxcbiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIHNjcm9sbEhhbmRsZXIoKSB7XG4gICAgICAgICAgICB2YXIgX3RoaXMyID0gdGhpcztcblxuICAgICAgICAgICAgdGhpcy5wYXJhbGxheEl0ZW1zLmZvckVhY2goZnVuY3Rpb24gKHBhcmFsbGF4SXRlbSkge1xuICAgICAgICAgICAgICAgIHZhciBzZWN0aW9uUGFyZW50ID0gcGFyYWxsYXhJdGVtLnBhcmVudEVsZW1lbnQsXG4gICAgICAgICAgICAgICAgICAgIHNlY3Rpb25QYXJlbnRUb3AgPSBfdGhpczIuZ2V0RWxlbWVudE9mZnNldChzZWN0aW9uUGFyZW50KSxcbiAgICAgICAgICAgICAgICAgICAgcGFyZW50T2Zmc2V0Qm90dG9tID0gc2VjdGlvblBhcmVudFRvcCArIHNlY3Rpb25QYXJlbnQub2Zmc2V0SGVpZ2h0LFxuICAgICAgICAgICAgICAgICAgICB3aW5kb3dIZWlnaHROYXYgPSBfdGhpczIuZ2V0RWxlbWVudE9mZnNldChwYXJhbGxheEl0ZW0pICE9PSAwID8gd2luZG93LnBhZ2VZT2Zmc2V0ICsgX3RoaXMyLm5hdkhlaWdodCA6IHdpbmRvdy5wYWdlWU9mZnNldDtcblxuICAgICAgICAgICAgICAgIGlmICh3aW5kb3dIZWlnaHROYXYgPiBzZWN0aW9uUGFyZW50VG9wICYmIHdpbmRvd0hlaWdodE5hdiA8IHBhcmVudE9mZnNldEJvdHRvbSkge1xuICAgICAgICAgICAgICAgICAgICBwYXJhbGxheEl0ZW0uc3R5bGUudHJhbnNmb3JtID0gJ3RyYW5zbGF0ZTNkKDAsICcgKyAod2luZG93SGVpZ2h0TmF2IC0gc2VjdGlvblBhcmVudFRvcCkgKiAuNiArICdweCwgMCknO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHBhcmFsbGF4SXRlbS5zdHlsZS50cmFuc2Zvcm0gPSAndHJhbnNsYXRlM2QoMCwgMHB4LCAwKSc7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICB9XSk7XG5cbiAgICByZXR1cm4gUGFyYWxsYXg7XG59KCk7XG5cbm5ldyBQYXJhbGxheCgpO1xuXCJ1c2Ugc3RyaWN0XCI7XG4ndXNlIHN0cmljdCc7XG5cbnZhciBfY3JlYXRlQ2xhc3MgPSBmdW5jdGlvbiAoKSB7IGZ1bmN0aW9uIGRlZmluZVByb3BlcnRpZXModGFyZ2V0LCBwcm9wcykgeyBmb3IgKHZhciBpID0gMDsgaSA8IHByb3BzLmxlbmd0aDsgaSsrKSB7IHZhciBkZXNjcmlwdG9yID0gcHJvcHNbaV07IGRlc2NyaXB0b3IuZW51bWVyYWJsZSA9IGRlc2NyaXB0b3IuZW51bWVyYWJsZSB8fCBmYWxzZTsgZGVzY3JpcHRvci5jb25maWd1cmFibGUgPSB0cnVlOyBpZiAoXCJ2YWx1ZVwiIGluIGRlc2NyaXB0b3IpIGRlc2NyaXB0b3Iud3JpdGFibGUgPSB0cnVlOyBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBkZXNjcmlwdG9yLmtleSwgZGVzY3JpcHRvcik7IH0gfSByZXR1cm4gZnVuY3Rpb24gKENvbnN0cnVjdG9yLCBwcm90b1Byb3BzLCBzdGF0aWNQcm9wcykgeyBpZiAocHJvdG9Qcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvci5wcm90b3R5cGUsIHByb3RvUHJvcHMpOyBpZiAoc3RhdGljUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IsIHN0YXRpY1Byb3BzKTsgcmV0dXJuIENvbnN0cnVjdG9yOyB9OyB9KCk7XG5cbmZ1bmN0aW9uIF9jbGFzc0NhbGxDaGVjayhpbnN0YW5jZSwgQ29uc3RydWN0b3IpIHsgaWYgKCEoaW5zdGFuY2UgaW5zdGFuY2VvZiBDb25zdHJ1Y3RvcikpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvblwiKTsgfSB9XG5cbnZhciBTbGlkZXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgZnVuY3Rpb24gU2xpZGVyKCkge1xuICAgICAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgU2xpZGVyKTtcblxuICAgICAgICB0aGlzLmhlaWdodCA9IDA7XG4gICAgICAgIHRoaXMuc2xpZGVyTnVtYmVyID0gMztcbiAgICAgICAgdGhpcy5zbGlkZXJXcmFwID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmRhbnplcnByZXNzLXNsaWRlci13cmFwJyk7XG4gICAgICAgIHRoaXMuc2xpZGVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmRhbnplcnByZXNzLXNsaWRlcicpO1xuXG4gICAgICAgIGlmICghdGhpcy5zbGlkZXIpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmNyZWF0ZVBhZ2luYXRpb24oKTtcbiAgICAgICAgdGhpcy5oYW5kbGVTbGlkZXIoKTtcbiAgICB9XG5cbiAgICBfY3JlYXRlQ2xhc3MoU2xpZGVyLCBbe1xuICAgICAgICBrZXk6ICdjcmVhdGVQYWdpbmF0aW9uJyxcbiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIGNyZWF0ZVBhZ2luYXRpb24oKSB7XG4gICAgICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuXG4gICAgICAgICAgICB2YXIgc2xpZGVyUGFnaW5hdGlvbiA9ICdcXG4gICAgICAgICAgICA8ZGl2IGNsYXNzPVwiZGFuemVycHJlc3Mtc2xpZGVyLXBhZ2luYXRpb25cIj5cXG4gICAgICAgICAgICAgICAgPHVsPlxcbiAgICAgICAgICAgICAgICA8L3VsPlxcbiAgICAgICAgICAgIDwvZGl2PlxcbiAgICAgICAgJztcblxuICAgICAgICAgICAgdmFyIGRvYyA9IG5ldyBET01QYXJzZXIoKS5wYXJzZUZyb21TdHJpbmcoc2xpZGVyUGFnaW5hdGlvbiwgJ3RleHQvaHRtbCcpLmJvZHkuZmlyc3RDaGlsZDtcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5zbGlkZXIuY2hpbGRyZW4ubGVuZ3RoOyBpKyspIHtcblxuICAgICAgICAgICAgICAgIGlmIChpID4gdGhpcy5zbGlkZXJOdW1iZXIpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGJ1dHRvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2xpJyk7XG4gICAgICAgICAgICAgICAgICAgIGRvYy5jaGlsZHJlblswXS5hcHBlbmQoYnV0dG9uKTtcbiAgICAgICAgICAgICAgICAgICAgYnV0dG9uLmNsYXNzTGlzdC5hZGQoJ2FjdGl2ZScpO1xuXG4gICAgICAgICAgICAgICAgICAgIGJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgYWN0aXZlRGl2ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmRhbnplcnByZXNzLXNsaWRlciBkaXYuYWN0aXZlJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgYWN0aXZlTGkgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuZGFuemVycHJlc3Mtc2xpZGVyLXBhZ2luYXRpb24gdWwgbGknKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMuc2V0QWN0aXZlU3R1ZmYoYWN0aXZlRGl2KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzLnNldEFjdGl2ZVN0dWZmKGFjdGl2ZUxpKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgZS50YXJnZXQuY2xhc3NMaXN0LmFkZCgnYWN0aXZlJyk7XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMuc2xpZGVyV3JhcC5hcHBlbmQoZG9jKTtcbiAgICAgICAgfVxuICAgIH0sIHtcbiAgICAgICAga2V5OiAnaGFuZGxlU2xpZGVyJyxcbiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIGhhbmRsZVNsaWRlcigpIHtcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5zbGlkZXIuY2hpbGRyZW4ubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICB2YXIgY2hpbGQgPSB0aGlzLnNsaWRlci5jaGlsZHJlbltpXTtcbiAgICAgICAgICAgICAgICB2YXIgaXRlbUhlaWdodCA9IGNoaWxkLm9mZnNldEhlaWdodDtcblxuICAgICAgICAgICAgICAgIGlmIChpdGVtSGVpZ2h0ID4gdGhpcy5oZWlnaHQpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5oZWlnaHQgPSBpdGVtSGVpZ2h0O1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGNoaWxkLnN0eWxlLnBvc2l0aW9uID0gJ2Fic29sdXRlJztcbiAgICAgICAgICAgICAgICBjaGlsZC5jbGFzc0xpc3QuYWRkKCdzbGlkZXItY2hpbGQnKTtcbiAgICAgICAgICAgICAgICBjaGlsZC5jbGFzc0xpc3QuYWRkKCdhY3RpdmUnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMuc2xpZGVyLnN0eWxlLmhlaWdodCA9IHRoaXMuaGVpZ2h0ICsgJ3B4JztcbiAgICAgICAgfVxuICAgIH0sIHtcbiAgICAgICAga2V5OiAnc2V0QWN0aXZlU3R1ZmYnLFxuICAgICAgICB2YWx1ZTogZnVuY3Rpb24gc2V0QWN0aXZlU3R1ZmYodGhpbmcpIHtcbiAgICAgICAgICAgIGlmICh0aGluZykge1xuICAgICAgICAgICAgICAgIHRoaW5nLmZvckVhY2goZnVuY3Rpb24gKGRpdikge1xuICAgICAgICAgICAgICAgICAgICBkaXYuY2xhc3NMaXN0LnJlbW92ZSgnYWN0aXZlJyk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XSk7XG5cbiAgICByZXR1cm4gU2xpZGVyO1xufSgpO1xuXG5uZXcgU2xpZGVyKCk7IiwiY2xhc3MgUGFyYWxsYXgge1xuICAgIGNvbnN0cnVjdG9yKCkgXG4gICAge1xuICAgICAgICB0aGlzLnBhcmFsbGF4SXRlbXMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuZGFuemVycHJlc3MtcGFyYWxsYXgnKTtcbiAgICAgICAgdGhpcy5uYXZIZWlnaHQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdoZWFkZXInKS5vZmZzZXRIZWlnaHQ7XG4gICAgICAgIHRoaXMuaW5pdCgpO1xuICAgIH1cblxuICAgIGluaXQoKSBcbiAgICB7XG4gICAgICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ3Njcm9sbCcsICgpID0+IHtcbiAgICAgICAgICAgIHdpbmRvdy5yZXF1ZXN0QW5pbWF0aW9uRnJhbWUoKCkgPT4ge1xuICAgICAgICAgICAgICAgIHRoaXMuc2Nyb2xsSGFuZGxlcigpXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgZ2V0RWxlbWVudE9mZnNldChlbCkge1xuICAgICAgICBsZXQgdG9wID0gMDtcbiAgICAgICAgbGV0IGVsZW1lbnQgPSBlbDtcbiAgICBcbiAgICAgICAgLy8gTG9vcCB0aHJvdWdoIHRoZSBET00gdHJlZVxuICAgICAgICAvLyBhbmQgYWRkIGl0J3MgcGFyZW50J3Mgb2Zmc2V0IHRvIGdldCBwYWdlIG9mZnNldFxuICAgICAgICBkbyB7XG4gICAgICAgICAgICB0b3AgKz0gZWxlbWVudC5vZmZzZXRUb3AgfHwgMDtcbiAgICAgICAgICAgIGVsZW1lbnQgPSBlbGVtZW50Lm9mZnNldFBhcmVudDtcbiAgICAgICAgfSB3aGlsZSAoZWxlbWVudCk7XG4gICAgXG4gICAgICAgIHJldHVybiB0b3A7XG4gICAgfVxuXG4gICAgc2Nyb2xsSGFuZGxlcigpIFxuICAgIHtcbiAgICAgICAgdGhpcy5wYXJhbGxheEl0ZW1zLmZvckVhY2gocGFyYWxsYXhJdGVtID0+IHtcbiAgICAgICAgICAgIHZhciBzZWN0aW9uUGFyZW50ID0gcGFyYWxsYXhJdGVtLnBhcmVudEVsZW1lbnQsXG4gICAgICAgICAgICAgICAgc2VjdGlvblBhcmVudFRvcCA9IHRoaXMuZ2V0RWxlbWVudE9mZnNldChzZWN0aW9uUGFyZW50KSxcbiAgICAgICAgICAgICAgICBwYXJlbnRPZmZzZXRCb3R0b20gPSBzZWN0aW9uUGFyZW50VG9wICsgc2VjdGlvblBhcmVudC5vZmZzZXRIZWlnaHQsXG4gICAgICAgICAgICAgICAgd2luZG93SGVpZ2h0TmF2ID0gKHRoaXMuZ2V0RWxlbWVudE9mZnNldChwYXJhbGxheEl0ZW0pICE9PSAwKSA/IHdpbmRvdy5wYWdlWU9mZnNldCArIHRoaXMubmF2SGVpZ2h0IDogd2luZG93LnBhZ2VZT2Zmc2V0O1xuICAgIFxuICAgICAgICAgICAgaWYgKHdpbmRvd0hlaWdodE5hdiA+IHNlY3Rpb25QYXJlbnRUb3AgJiYgd2luZG93SGVpZ2h0TmF2IDwgcGFyZW50T2Zmc2V0Qm90dG9tKSB7XG4gICAgICAgICAgICAgICAgcGFyYWxsYXhJdGVtLnN0eWxlLnRyYW5zZm9ybSA9ICd0cmFuc2xhdGUzZCgwLCAnICsgKCh3aW5kb3dIZWlnaHROYXYgLSBzZWN0aW9uUGFyZW50VG9wKSAqIC42KSArICdweCwgMCknO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBwYXJhbGxheEl0ZW0uc3R5bGUudHJhbnNmb3JtID0gJ3RyYW5zbGF0ZTNkKDAsIDBweCwgMCknO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9XG59XG5cbm5ldyBQYXJhbGxheCgpOyIsImNsYXNzIFNsaWRlciB7XG4gICAgY29uc3RydWN0b3IoKSBcbiAgICB7XG4gICAgICAgIHRoaXMuaGVpZ2h0ID0gMDtcbiAgICAgICAgdGhpcy5zbGlkZXJOdW1iZXIgPSAzO1xuICAgICAgICB0aGlzLnNsaWRlcldyYXAgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuZGFuemVycHJlc3Mtc2xpZGVyLXdyYXAnKTtcbiAgICAgICAgdGhpcy5zbGlkZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuZGFuemVycHJlc3Mtc2xpZGVyJyk7XG5cbiAgICAgICAgaWYgKCF0aGlzLnNsaWRlcikge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuY3JlYXRlUGFnaW5hdGlvbigpO1xuICAgICAgICB0aGlzLmhhbmRsZVNsaWRlcigpOyAgIFxuICAgIH1cblxuICAgIGNyZWF0ZVBhZ2luYXRpb24oKVxuICAgIHtcbiAgICAgICAgbGV0IHNsaWRlclBhZ2luYXRpb24gPSBgXG4gICAgICAgICAgICA8ZGl2IGNsYXNzPVwiZGFuemVycHJlc3Mtc2xpZGVyLXBhZ2luYXRpb25cIj5cbiAgICAgICAgICAgICAgICA8dWw+XG4gICAgICAgICAgICAgICAgPC91bD5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICBgO1xuXG4gICAgICAgIGxldCBkb2MgPSBuZXcgRE9NUGFyc2VyKCkucGFyc2VGcm9tU3RyaW5nKHNsaWRlclBhZ2luYXRpb24sICd0ZXh0L2h0bWwnKS5ib2R5LmZpcnN0Q2hpbGQ7XG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5zbGlkZXIuY2hpbGRyZW4ubGVuZ3RoOyBpKyspIHtcblxuICAgICAgICAgICAgaWYgKGkgPiB0aGlzLnNsaWRlck51bWJlcikge1xuICAgICAgICAgICAgICAgIGxldCBidXR0b24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdsaScpO1xuICAgICAgICAgICAgICAgIGRvYy5jaGlsZHJlblswXS5hcHBlbmQoYnV0dG9uKTtcbiAgICAgICAgICAgICAgICBidXR0b24uY2xhc3NMaXN0LmFkZCgnYWN0aXZlJyk7XG5cbiAgICAgICAgICAgICAgICBidXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBsZXQgYWN0aXZlRGl2ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmRhbnplcnByZXNzLXNsaWRlciBkaXYuYWN0aXZlJyk7XG4gICAgICAgICAgICAgICAgICAgIGxldCBhY3RpdmVMaSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5kYW56ZXJwcmVzcy1zbGlkZXItcGFnaW5hdGlvbiB1bCBsaScpO1xuXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc2V0QWN0aXZlU3R1ZmYoYWN0aXZlRGl2KTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zZXRBY3RpdmVTdHVmZihhY3RpdmVMaSk7XG5cbiAgICAgICAgICAgICAgICAgICAgZS50YXJnZXQuY2xhc3NMaXN0LmFkZCgnYWN0aXZlJyk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5zbGlkZXJXcmFwLmFwcGVuZChkb2MpO1xuICAgIH1cblxuICAgIGhhbmRsZVNsaWRlcigpIFxuICAgIHtcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLnNsaWRlci5jaGlsZHJlbi5sZW5ndGg7IGkrKykgeyAgICAgICAgXG4gICAgICAgICAgICBsZXQgY2hpbGQgPSB0aGlzLnNsaWRlci5jaGlsZHJlbltpXTtcbiAgICAgICAgICAgIGxldCBpdGVtSGVpZ2h0ID0gY2hpbGQub2Zmc2V0SGVpZ2h0O1xuXG4gICAgICAgICAgICBpZiAoaXRlbUhlaWdodCA+IHRoaXMuaGVpZ2h0KSB7XG4gICAgICAgICAgICAgICAgdGhpcy5oZWlnaHQgPSBpdGVtSGVpZ2h0O1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBjaGlsZC5zdHlsZS5wb3NpdGlvbiA9ICdhYnNvbHV0ZSc7XG4gICAgICAgICAgICBjaGlsZC5jbGFzc0xpc3QuYWRkKCdzbGlkZXItY2hpbGQnKTtcbiAgICAgICAgICAgIGNoaWxkLmNsYXNzTGlzdC5hZGQoJ2FjdGl2ZScpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuc2xpZGVyLnN0eWxlLmhlaWdodCA9IHRoaXMuaGVpZ2h0ICsgJ3B4JztcbiAgICB9XG5cbiAgICBzZXRBY3RpdmVTdHVmZih0aGluZykgXG4gICAge1xuICAgICAgICBpZiAodGhpbmcpIHtcbiAgICAgICAgICAgIHRoaW5nLmZvckVhY2goKGRpdikgPT4ge1xuICAgICAgICAgICAgICAgIGRpdi5jbGFzc0xpc3QucmVtb3ZlKCdhY3RpdmUnKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfVxufVxubmV3IFNsaWRlcigpOyJdLCJzb3VyY2VSb290IjoiL3NvdXJjZS8ifQ==
