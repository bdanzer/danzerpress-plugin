"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var _createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),Parallax=function(){function e(){_classCallCheck(this,e),this.parallaxItems=document.querySelectorAll(".danzerpress-parallax"),this.navHeight=document.querySelector("header").offsetHeight,this.init()}return _createClass(e,[{key:"init",value:function(){var e=this;document.addEventListener("scroll",function(){window.requestAnimationFrame(function(){e.scrollHandler()})})}},{key:"getElementOffset",value:function(e){var t=0,n=e;do t+=n.offsetTop||0,n=n.offsetParent;while(n);return t}},{key:"scrollHandler",value:function(){var e=this;this.parallaxItems.forEach(function(t){var n=t.parentElement.classList.contains("danzerpress-title-area")?t.parentElement:t.closest("section"),r=e.getElementOffset(n),i=r+n.offsetHeight,a=0!==e.getElementOffset(t)?window.pageYOffset+e.navHeight:window.pageYOffset;a>r&&a<i?t.style.transform="translate3d(0, "+.6*(a-r)+"px, 0)":t.style.transform="translate3d(0, 0px, 0)"})}}]),e}();new Parallax;var _createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),Slider=function(){function e(){_classCallCheck(this,e),this.height=0,this.sliderNumber=3,this.sliderWrap=document.querySelector(".danzerpress-slider-wrap"),this.slider=document.querySelector(".danzerpress-slider"),this.slider&&(this.createPagination(),this.handleSlider())}return _createClass(e,[{key:"createPagination",value:function(){for(var e=this,t='\n            <div class="danzerpress-slider-pagination">\n                <ul>\n                </ul>\n            </div>\n        ',n=(new DOMParser).parseFromString(t,"text/html").body.firstChild,r=0;r<this.slider.children.length;r++)if(r>this.sliderNumber){var i=document.createElement("li");n.children[0].append(i),i.classList.add("active"),i.addEventListener("click",function(t){var n=document.querySelectorAll(".danzerpress-slider div.active"),r=document.querySelectorAll(".danzerpress-slider-pagination ul li");e.setActiveStuff(n),e.setActiveStuff(r),t.target.classList.add("active")})}this.sliderWrap.append(n)}},{key:"handleSlider",value:function(){for(var e=0;e<this.slider.children.length;e++){var t=this.slider.children[e],n=t.offsetHeight;n>this.height&&(this.height=n),t.style.position="absolute",t.classList.add("slider-child"),t.classList.add("active")}this.slider.style.height=this.height+"px"}},{key:"setActiveStuff",value:function(e){e&&e.forEach(function(e){e.classList.remove("active")})}}]),e}();new Slider;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1haW4uanMiLCJwYXJhbGxheC5qcyIsInNsaWRlci5qcyJdLCJuYW1lcyI6WyJfY2xhc3NDYWxsQ2hlY2siLCJpbnN0YW5jZSIsIkNvbnN0cnVjdG9yIiwiVHlwZUVycm9yIiwiX2NyZWF0ZUNsYXNzIiwiZGVmaW5lUHJvcGVydGllcyIsInRhcmdldCIsInByb3BzIiwiaSIsImxlbmd0aCIsImRlc2NyaXB0b3IiLCJlbnVtZXJhYmxlIiwiY29uZmlndXJhYmxlIiwid3JpdGFibGUiLCJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImtleSIsInByb3RvUHJvcHMiLCJzdGF0aWNQcm9wcyIsInByb3RvdHlwZSIsIlBhcmFsbGF4IiwidGhpcyIsInBhcmFsbGF4SXRlbXMiLCJkb2N1bWVudCIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJuYXZIZWlnaHQiLCJxdWVyeVNlbGVjdG9yIiwib2Zmc2V0SGVpZ2h0IiwiaW5pdCIsInZhbHVlIiwiX3RoaXMiLCJhZGRFdmVudExpc3RlbmVyIiwid2luZG93IiwicmVxdWVzdEFuaW1hdGlvbkZyYW1lIiwic2Nyb2xsSGFuZGxlciIsImVsIiwidG9wIiwiZWxlbWVudCIsIm9mZnNldFRvcCIsIm9mZnNldFBhcmVudCIsIl90aGlzMiIsImZvckVhY2giLCJwYXJhbGxheEl0ZW0iLCJzZWN0aW9uUGFyZW50IiwicGFyZW50RWxlbWVudCIsImNsYXNzTGlzdCIsImNvbnRhaW5zIiwiY2xvc2VzdCIsInNlY3Rpb25QYXJlbnRUb3AiLCJnZXRFbGVtZW50T2Zmc2V0IiwicGFyZW50T2Zmc2V0Qm90dG9tIiwid2luZG93SGVpZ2h0TmF2IiwicGFnZVlPZmZzZXQiLCJzdHlsZSIsInRyYW5zZm9ybSIsIlNsaWRlciIsImhlaWdodCIsInNsaWRlck51bWJlciIsInNsaWRlcldyYXAiLCJzbGlkZXIiLCJjcmVhdGVQYWdpbmF0aW9uIiwiaGFuZGxlU2xpZGVyIiwic2xpZGVyUGFnaW5hdGlvbiIsImRvYyIsIkRPTVBhcnNlciIsInBhcnNlRnJvbVN0cmluZyIsImJvZHkiLCJmaXJzdENoaWxkIiwiY2hpbGRyZW4iLCJidXR0b24iLCJjcmVhdGVFbGVtZW50IiwiYXBwZW5kIiwiYWRkIiwiZSIsImFjdGl2ZURpdiIsImFjdGl2ZUxpIiwic2V0QWN0aXZlU3R1ZmYiLCJjaGlsZCIsIml0ZW1IZWlnaHQiLCJwb3NpdGlvbiIsInRoaW5nIiwiZGl2IiwicmVtb3ZlIl0sIm1hcHBpbmdzIjoiQUFBQSxZQUlBLFNBQVNBLGlCQUFnQkMsRUFBVUMsR0FBZSxLQUFNRCxZQUFvQkMsSUFBZ0IsS0FBTSxJQUFJQyxXQUFVLHFDQWtFaEgsUUFBU0gsaUJBQWdCQyxFQUFVQyxHQUFlLEtBQU1ELFlBQW9CQyxJQUFnQixLQUFNLElBQUlDLFdBQVUscUNBcEVoSCxHQUFJQyxjQUFlLFdBQWMsUUFBU0MsR0FBaUJDLEVBQVFDLEdBQVMsSUFBSyxHQUFJQyxHQUFJLEVBQUdBLEVBQUlELEVBQU1FLE9BQVFELElBQUssQ0FBRSxHQUFJRSxHQUFhSCxFQUFNQyxFQUFJRSxHQUFXQyxXQUFhRCxFQUFXQyxhQUFjLEVBQU9ELEVBQVdFLGNBQWUsRUFBVSxTQUFXRixLQUFZQSxFQUFXRyxVQUFXLEdBQU1DLE9BQU9DLGVBQWVULEVBQVFJLEVBQVdNLElBQUtOLElBQWlCLE1BQU8sVUFBVVIsRUFBYWUsRUFBWUMsR0FBaUosTUFBOUhELElBQVlaLEVBQWlCSCxFQUFZaUIsVUFBV0YsR0FBaUJDLEdBQWFiLEVBQWlCSCxFQUFhZ0IsR0FBcUJoQixNQ0YxaEJrQixTRE1TLFdDTFgsUUFBQUEsS0FDQXBCLGdCQUFBcUIsS0FBQUQsR0FDSUMsS0FBS0MsY0FBZ0JDLFNBQVNDLGlCQUFpQix5QkFDL0NILEtBQUtJLFVBQVlGLFNBQVNHLGNBQWMsVUFBVUMsYUFDbEROLEtBQUtPLE9Ed0RULE1BOUNBeEIsY0FBYWdCLElBQ1RKLElBQUssT0FDTGEsTUFBTyxXQ1JYLEdBQUFDLEdBQUFULElBQ0lFLFVBQVNRLGlCQUFpQixTQUFVLFdBQ2hDQyxPQUFPQyxzQkFBc0IsV0FDekJI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LGdCQUNwQkssRUFBTWhDLFVBQVUyQixJQUFJLFVBRXhCbkQsS0FBS3NDLE9BQU9OLE1BQU1HLE9BQVNuQyxLQUFLbUMsT0FBUyxRRjBFekN4QyxJQUFLLGlCQUNMYSxNQUFPLFNFeEVJbUQsR0FFUEEsR0FDQUEsRUFBTXZDLFFBQVEsU0FBQ3dDLEdBQ1hBLEVBQUlwQyxVQUFVcUMsT0FBTyxnQkY2RTFCM0IsSUV4RVgsSUFBSUEiLCJmaWxlIjoibWFpbi5qcyIsInNvdXJjZXNDb250ZW50IjpbIid1c2Ugc3RyaWN0JztcblxudmFyIF9jcmVhdGVDbGFzcyA9IGZ1bmN0aW9uICgpIHsgZnVuY3Rpb24gZGVmaW5lUHJvcGVydGllcyh0YXJnZXQsIHByb3BzKSB7IGZvciAodmFyIGkgPSAwOyBpIDwgcHJvcHMubGVuZ3RoOyBpKyspIHsgdmFyIGRlc2NyaXB0b3IgPSBwcm9wc1tpXTsgZGVzY3JpcHRvci5lbnVtZXJhYmxlID0gZGVzY3JpcHRvci5lbnVtZXJhYmxlIHx8IGZhbHNlOyBkZXNjcmlwdG9yLmNvbmZpZ3VyYWJsZSA9IHRydWU7IGlmIChcInZhbHVlXCIgaW4gZGVzY3JpcHRvcikgZGVzY3JpcHRvci53cml0YWJsZSA9IHRydWU7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGRlc2NyaXB0b3Iua2V5LCBkZXNjcmlwdG9yKTsgfSB9IHJldHVybiBmdW5jdGlvbiAoQ29uc3RydWN0b3IsIHByb3RvUHJvcHMsIHN0YXRpY1Byb3BzKSB7IGlmIChwcm90b1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLnByb3RvdHlwZSwgcHJvdG9Qcm9wcyk7IGlmIChzdGF0aWNQcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvciwgc3RhdGljUHJvcHMpOyByZXR1cm4gQ29uc3RydWN0b3I7IH07IH0oKTtcblxuZnVuY3Rpb24gX2NsYXNzQ2FsbENoZWNrKGluc3RhbmNlLCBDb25zdHJ1Y3RvcikgeyBpZiAoIShpbnN0YW5jZSBpbnN0YW5jZW9mIENvbnN0cnVjdG9yKSkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uXCIpOyB9IH1cblxudmFyIFBhcmFsbGF4ID0gZnVuY3Rpb24gKCkge1xuICAgIGZ1bmN0aW9uIFBhcmFsbGF4KCkge1xuICAgICAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgUGFyYWxsYXgpO1xuXG4gICAgICAgIHRoaXMucGFyYWxsYXhJdGVtcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5kYW56ZXJwcmVzcy1wYXJhbGxheCcpO1xuICAgICAgICB0aGlzLm5hdkhlaWdodCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ2hlYWRlcicpLm9mZnNldEhlaWdodDtcbiAgICAgICAgdGhpcy5pbml0KCk7XG4gICAgfVxuXG4gICAgX2NyZWF0ZUNsYXNzKFBhcmFsbGF4LCBbe1xuICAgICAgICBrZXk6ICdpbml0JyxcbiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIGluaXQoKSB7XG4gICAgICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuXG4gICAgICAgICAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdzY3JvbGwnLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgd2luZG93LnJlcXVlc3RBbmltYXRpb25GcmFtZShmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgIF90aGlzLnNjcm9sbEhhbmRsZXIoKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfSwge1xuICAgICAgICBrZXk6ICdnZXRFbGVtZW50T2Zmc2V0JyxcbiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIGdldEVsZW1lbnRPZmZzZXQoZWwpIHtcbiAgICAgICAgICAgIHZhciB0b3AgPSAwO1xuICAgICAgICAgICAgdmFyIGVsZW1lbnQgPSBlbDtcblxuICAgICAgICAgICAgLy8gTG9vcCB0aHJvdWdoIHRoZSBET00gdHJlZVxuICAgICAgICAgICAgLy8gYW5kIGFkZCBpdCdzIHBhcmVudCdzIG9mZnNldCB0byBnZXQgcGFnZSBvZmZzZXRcbiAgICAgICAgICAgIGRvIHtcbiAgICAgICAgICAgICAgICB0b3AgKz0gZWxlbWVudC5vZmZzZXRUb3AgfHwgMDtcbiAgICAgICAgICAgICAgICBlbGVtZW50ID0gZWxlbWVudC5vZmZzZXRQYXJlbnQ7XG4gICAgICAgICAgICB9IHdoaWxlIChlbGVtZW50KTtcblxuICAgICAgICAgICAgcmV0dXJuIHRvcDtcbiAgICAgICAgfVxuICAgIH0sIHtcbiAgICAgICAga2V5OiAnc2Nyb2xsSGFuZGxlcicsXG4gICAgICAgIHZhbHVlOiBmdW5jdGlvbiBzY3JvbGxIYW5kbGVyKCkge1xuICAgICAgICAgICAgdmFyIF90aGlzMiA9IHRoaXM7XG5cbiAgICAgICAgICAgIHRoaXMucGFyYWxsYXhJdGVtcy5mb3JFYWNoKGZ1bmN0aW9uIChwYXJhbGxheEl0ZW0pIHtcbiAgICAgICAgICAgICAgICB2YXIgc2VjdGlvblBhcmVudCA9IHBhcmFsbGF4SXRlbS5wYXJlbnRFbGVtZW50LmNsYXNzTGlzdC5jb250YWlucygnZGFuemVycHJlc3MtdGl0bGUtYXJlYScpID8gcGFyYWxsYXhJdGVtLnBhcmVudEVsZW1lbnQgOiBwYXJhbGxheEl0ZW0uY2xvc2VzdCgnc2VjdGlvbicpLFxuICAgICAgICAgICAgICAgICAgICBzZWN0aW9uUGFyZW50VG9wID0gX3RoaXMyLmdldEVsZW1lbnRPZmZzZXQoc2VjdGlvblBhcmVudCksXG4gICAgICAgICAgICAgICAgICAgIHBhcmVudE9mZnNldEJvdHRvbSA9IHNlY3Rpb25QYXJlbnRUb3AgKyBzZWN0aW9uUGFyZW50Lm9mZnNldEhlaWdodCxcbiAgICAgICAgICAgICAgICAgICAgd2luZG93SGVpZ2h0TmF2ID0gX3RoaXMyLmdldEVsZW1lbnRPZmZzZXQocGFyYWxsYXhJdGVtKSAhPT0gMCA/IHdpbmRvdy5wYWdlWU9mZnNldCArIF90aGlzMi5uYXZIZWlnaHQgOiB3aW5kb3cucGFnZVlPZmZzZXQ7XG5cbiAgICAgICAgICAgICAgICBpZiAod2luZG93SGVpZ2h0TmF2ID4gc2VjdGlvblBhcmVudFRvcCAmJiB3aW5kb3dIZWlnaHROYXYgPCBwYXJlbnRPZmZzZXRCb3R0b20pIHtcbiAgICAgICAgICAgICAgICAgICAgcGFyYWxsYXhJdGVtLnN0eWxlLnRyYW5zZm9ybSA9ICd0cmFuc2xhdGUzZCgwLCAnICsgKHdpbmRvd0hlaWdodE5hdiAtIHNlY3Rpb25QYXJlbnRUb3ApICogLjYgKyAncHgsIDApJztcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBwYXJhbGxheEl0ZW0uc3R5bGUudHJhbnNmb3JtID0gJ3RyYW5zbGF0ZTNkKDAsIDBweCwgMCknO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfV0pO1xuXG4gICAgcmV0dXJuIFBhcmFsbGF4O1xufSgpO1xuXG5uZXcgUGFyYWxsYXgoKTtcblwidXNlIHN0cmljdFwiO1xuJ3VzZSBzdHJpY3QnO1xuXG52YXIgX2NyZWF0ZUNsYXNzID0gZnVuY3Rpb24gKCkgeyBmdW5jdGlvbiBkZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCwgcHJvcHMpIHsgZm9yICh2YXIgaSA9IDA7IGkgPCBwcm9wcy5sZW5ndGg7IGkrKykgeyB2YXIgZGVzY3JpcHRvciA9IHByb3BzW2ldOyBkZXNjcmlwdG9yLmVudW1lcmFibGUgPSBkZXNjcmlwdG9yLmVudW1lcmFibGUgfHwgZmFsc2U7IGRlc2NyaXB0b3IuY29uZmlndXJhYmxlID0gdHJ1ZTsgaWYgKFwidmFsdWVcIiBpbiBkZXNjcmlwdG9yKSBkZXNjcmlwdG9yLndyaXRhYmxlID0gdHJ1ZTsgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwgZGVzY3JpcHRvci5rZXksIGRlc2NyaXB0b3IpOyB9IH0gcmV0dXJuIGZ1bmN0aW9uIChDb25zdHJ1Y3RvciwgcHJvdG9Qcm9wcywgc3RhdGljUHJvcHMpIHsgaWYgKHByb3RvUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IucHJvdG90eXBlLCBwcm90b1Byb3BzKTsgaWYgKHN0YXRpY1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLCBzdGF0aWNQcm9wcyk7IHJldHVybiBDb25zdHJ1Y3RvcjsgfTsgfSgpO1xuXG5mdW5jdGlvbiBfY2xhc3NDYWxsQ2hlY2soaW5zdGFuY2UsIENvbnN0cnVjdG9yKSB7IGlmICghKGluc3RhbmNlIGluc3RhbmNlb2YgQ29uc3RydWN0b3IpKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb25cIik7IH0gfVxuXG52YXIgU2xpZGVyID0gZnVuY3Rpb24gKCkge1xuICAgIGZ1bmN0aW9uIFNsaWRlcigpIHtcbiAgICAgICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIFNsaWRlcik7XG5cbiAgICAgICAgdGhpcy5oZWlnaHQgPSAwO1xuICAgICAgICB0aGlzLnNsaWRlck51bWJlciA9IDM7XG4gICAgICAgIHRoaXMuc2xpZGVyV3JhcCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5kYW56ZXJwcmVzcy1zbGlkZXItd3JhcCcpO1xuICAgICAgICB0aGlzLnNsaWRlciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5kYW56ZXJwcmVzcy1zbGlkZXInKTtcblxuICAgICAgICBpZiAoIXRoaXMuc2xpZGVyKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5jcmVhdGVQYWdpbmF0aW9uKCk7XG4gICAgICAgIHRoaXMuaGFuZGxlU2xpZGVyKCk7XG4gICAgfVxuXG4gICAgX2NyZWF0ZUNsYXNzKFNsaWRlciwgW3tcbiAgICAgICAga2V5OiAnY3JlYXRlUGFnaW5hdGlvbicsXG4gICAgICAgIHZhbHVlOiBmdW5jdGlvbiBjcmVhdGVQYWdpbmF0aW9uKCkge1xuICAgICAgICAgICAgdmFyIF90aGlzID0gdGhpcztcblxuICAgICAgICAgICAgdmFyIHNsaWRlclBhZ2luYXRpb24gPSAnXFxuICAgICAgICAgICAgPGRpdiBjbGFzcz1cImRhbnplcnByZXNzLXNsaWRlci1wYWdpbmF0aW9uXCI+XFxuICAgICAgICAgICAgICAgIDx1bD5cXG4gICAgICAgICAgICAgICAgPC91bD5cXG4gICAgICAgICAgICA8L2Rpdj5cXG4gICAgICAgICc7XG5cbiAgICAgICAgICAgIHZhciBkb2MgPSBuZXcgRE9NUGFyc2VyKCkucGFyc2VGcm9tU3RyaW5nKHNsaWRlclBhZ2luYXRpb24sICd0ZXh0L2h0bWwnKS5ib2R5LmZpcnN0Q2hpbGQ7XG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMuc2xpZGVyLmNoaWxkcmVuLmxlbmd0aDsgaSsrKSB7XG5cbiAgICAgICAgICAgICAgICBpZiAoaSA+IHRoaXMuc2xpZGVyTnVtYmVyKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBidXR0b24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdsaScpO1xuICAgICAgICAgICAgICAgICAgICBkb2MuY2hpbGRyZW5bMF0uYXBwZW5kKGJ1dHRvbik7XG4gICAgICAgICAgICAgICAgICAgIGJ1dHRvbi5jbGFzc0xpc3QuYWRkKCdhY3RpdmUnKTtcblxuICAgICAgICAgICAgICAgICAgICBidXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGFjdGl2ZURpdiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5kYW56ZXJwcmVzcy1zbGlkZXIgZGl2LmFjdGl2ZScpO1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGFjdGl2ZUxpID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmRhbnplcnByZXNzLXNsaWRlci1wYWdpbmF0aW9uIHVsIGxpJyk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzLnNldEFjdGl2ZVN0dWZmKGFjdGl2ZURpdik7XG4gICAgICAgICAgICAgICAgICAgICAgICBfdGhpcy5zZXRBY3RpdmVTdHVmZihhY3RpdmVMaSk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGUudGFyZ2V0LmNsYXNzTGlzdC5hZGQoJ2FjdGl2ZScpO1xuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLnNsaWRlcldyYXAuYXBwZW5kKGRvYyk7XG4gICAgICAgIH1cbiAgICB9LCB7XG4gICAgICAgIGtleTogJ2hhbmRsZVNsaWRlcicsXG4gICAgICAgIHZhbHVlOiBmdW5jdGlvbiBoYW5kbGVTbGlkZXIoKSB7XG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMuc2xpZGVyLmNoaWxkcmVuLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgdmFyIGNoaWxkID0gdGhpcy5zbGlkZXIuY2hpbGRyZW5baV07XG4gICAgICAgICAgICAgICAgdmFyIGl0ZW1IZWlnaHQgPSBjaGlsZC5vZmZzZXRIZWlnaHQ7XG5cbiAgICAgICAgICAgICAgICBpZiAoaXRlbUhlaWdodCA+IHRoaXMuaGVpZ2h0KSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuaGVpZ2h0ID0gaXRlbUhlaWdodDtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBjaGlsZC5zdHlsZS5wb3NpdGlvbiA9ICdhYnNvbHV0ZSc7XG4gICAgICAgICAgICAgICAgY2hpbGQuY2xhc3NMaXN0LmFkZCgnc2xpZGVyLWNoaWxkJyk7XG4gICAgICAgICAgICAgICAgY2hpbGQuY2xhc3NMaXN0LmFkZCgnYWN0aXZlJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLnNsaWRlci5zdHlsZS5oZWlnaHQgPSB0aGlzLmhlaWdodCArICdweCc7XG4gICAgICAgIH1cbiAgICB9LCB7XG4gICAgICAgIGtleTogJ3NldEFjdGl2ZVN0dWZmJyxcbiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIHNldEFjdGl2ZVN0dWZmKHRoaW5nKSB7XG4gICAgICAgICAgICBpZiAodGhpbmcpIHtcbiAgICAgICAgICAgICAgICB0aGluZy5mb3JFYWNoKGZ1bmN0aW9uIChkaXYpIHtcbiAgICAgICAgICAgICAgICAgICAgZGl2LmNsYXNzTGlzdC5yZW1vdmUoJ2FjdGl2ZScpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfV0pO1xuXG4gICAgcmV0dXJuIFNsaWRlcjtcbn0oKTtcblxubmV3IFNsaWRlcigpOyIsImNsYXNzIFBhcmFsbGF4IHtcbiAgICBjb25zdHJ1Y3RvcigpIFxuICAgIHtcbiAgICAgICAgdGhpcy5wYXJhbGxheEl0ZW1zID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmRhbnplcnByZXNzLXBhcmFsbGF4Jyk7XG4gICAgICAgIHRoaXMubmF2SGVpZ2h0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignaGVhZGVyJykub2Zmc2V0SGVpZ2h0O1xuICAgICAgICB0aGlzLmluaXQoKTtcbiAgICB9XG5cbiAgICBpbml0KCkgXG4gICAge1xuICAgICAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdzY3JvbGwnLCAoKSA9PiB7XG4gICAgICAgICAgICB3aW5kb3cucmVxdWVzdEFuaW1hdGlvbkZyYW1lKCgpID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLnNjcm9sbEhhbmRsZXIoKVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIGdldEVsZW1lbnRPZmZzZXQoZWwpIHtcbiAgICAgICAgbGV0IHRvcCA9IDA7XG4gICAgICAgIGxldCBlbGVtZW50ID0gZWw7XG4gICAgXG4gICAgICAgIC8vIExvb3AgdGhyb3VnaCB0aGUgRE9NIHRyZWVcbiAgICAgICAgLy8gYW5kIGFkZCBpdCdzIHBhcmVudCdzIG9mZnNldCB0byBnZXQgcGFnZSBvZmZzZXRcbiAgICAgICAgZG8ge1xuICAgICAgICAgICAgdG9wICs9IGVsZW1lbnQub2Zmc2V0VG9wIHx8IDA7XG4gICAgICAgICAgICBlbGVtZW50ID0gZWxlbWVudC5vZmZzZXRQYXJlbnQ7XG4gICAgICAgIH0gd2hpbGUgKGVsZW1lbnQpO1xuICAgIFxuICAgICAgICByZXR1cm4gdG9wO1xuICAgIH1cblxuICAgIHNjcm9sbEhhbmRsZXIoKSBcbiAgICB7XG4gICAgICAgIHRoaXMucGFyYWxsYXhJdGVtcy5mb3JFYWNoKHBhcmFsbGF4SXRlbSA9PiB7XG4gICAgICAgICAgICB2YXIgc2VjdGlvblBhcmVudCA9IChwYXJhbGxheEl0ZW0ucGFyZW50RWxlbWVudC5jbGFzc0xpc3QuY29udGFpbnMoJ2RhbnplcnByZXNzLXRpdGxlLWFyZWEnKSkgPyBwYXJhbGxheEl0ZW0ucGFyZW50RWxlbWVudCA6IHBhcmFsbGF4SXRlbS5jbG9zZXN0KCdzZWN0aW9uJyksXG4gICAgICAgICAgICAgICAgc2VjdGlvblBhcmVudFRvcCA9IHRoaXMuZ2V0RWxlbWVudE9mZnNldChzZWN0aW9uUGFyZW50KSxcbiAgICAgICAgICAgICAgICBwYXJlbnRPZmZzZXRCb3R0b20gPSBzZWN0aW9uUGFyZW50VG9wICsgc2VjdGlvblBhcmVudC5vZmZzZXRIZWlnaHQsXG4gICAgICAgICAgICAgICAgd2luZG93SGVpZ2h0TmF2ID0gKHRoaXMuZ2V0RWxlbWVudE9mZnNldChwYXJhbGxheEl0ZW0pICE9PSAwKSA/IHdpbmRvdy5wYWdlWU9mZnNldCArIHRoaXMubmF2SGVpZ2h0IDogd2luZG93LnBhZ2VZT2Zmc2V0O1xuICAgIFxuICAgICAgICAgICAgaWYgKHdpbmRvd0hlaWdodE5hdiA+IHNlY3Rpb25QYXJlbnRUb3AgJiYgd2luZG93SGVpZ2h0TmF2IDwgcGFyZW50T2Zmc2V0Qm90dG9tKSB7XG4gICAgICAgICAgICAgICAgcGFyYWxsYXhJdGVtLnN0eWxlLnRyYW5zZm9ybSA9ICd0cmFuc2xhdGUzZCgwLCAnICsgKCh3aW5kb3dIZWlnaHROYXYgLSBzZWN0aW9uUGFyZW50VG9wKSAqIC42KSArICdweCwgMCknO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBwYXJhbGxheEl0ZW0uc3R5bGUudHJhbnNmb3JtID0gJ3RyYW5zbGF0ZTNkKDAsIDBweCwgMCknO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9XG59XG5cbm5ldyBQYXJhbGxheCgpOyIsImNsYXNzIFNsaWRlciB7XG4gICAgY29uc3RydWN0b3IoKSBcbiAgICB7XG4gICAgICAgIHRoaXMuaGVpZ2h0ID0gMDtcbiAgICAgICAgdGhpcy5zbGlkZXJOdW1iZXIgPSAzO1xuICAgICAgICB0aGlzLnNsaWRlcldyYXAgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuZGFuemVycHJlc3Mtc2xpZGVyLXdyYXAnKTtcbiAgICAgICAgdGhpcy5zbGlkZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuZGFuemVycHJlc3Mtc2xpZGVyJyk7XG5cbiAgICAgICAgaWYgKCF0aGlzLnNsaWRlcikge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuY3JlYXRlUGFnaW5hdGlvbigpO1xuICAgICAgICB0aGlzLmhhbmRsZVNsaWRlcigpOyAgIFxuICAgIH1cblxuICAgIGNyZWF0ZVBhZ2luYXRpb24oKVxuICAgIHtcbiAgICAgICAgbGV0IHNsaWRlclBhZ2luYXRpb24gPSBgXG4gICAgICAgICAgICA8ZGl2IGNsYXNzPVwiZGFuemVycHJlc3Mtc2xpZGVyLXBhZ2luYXRpb25cIj5cbiAgICAgICAgICAgICAgICA8dWw+XG4gICAgICAgICAgICAgICAgPC91bD5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICBgO1xuXG4gICAgICAgIGxldCBkb2MgPSBuZXcgRE9NUGFyc2VyKCkucGFyc2VGcm9tU3RyaW5nKHNsaWRlclBhZ2luYXRpb24sICd0ZXh0L2h0bWwnKS5ib2R5LmZpcnN0Q2hpbGQ7XG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5zbGlkZXIuY2hpbGRyZW4ubGVuZ3RoOyBpKyspIHtcblxuICAgICAgICAgICAgaWYgKGkgPiB0aGlzLnNsaWRlck51bWJlcikge1xuICAgICAgICAgICAgICAgIGxldCBidXR0b24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdsaScpO1xuICAgICAgICAgICAgICAgIGRvYy5jaGlsZHJlblswXS5hcHBlbmQoYnV0dG9uKTtcbiAgICAgICAgICAgICAgICBidXR0b24uY2xhc3NMaXN0LmFkZCgnYWN0aXZlJyk7XG5cbiAgICAgICAgICAgICAgICBidXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBsZXQgYWN0aXZlRGl2ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmRhbnplcnByZXNzLXNsaWRlciBkaXYuYWN0aXZlJyk7XG4gICAgICAgICAgICAgICAgICAgIGxldCBhY3RpdmVMaSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5kYW56ZXJwcmVzcy1zbGlkZXItcGFnaW5hdGlvbiB1bCBsaScpO1xuXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc2V0QWN0aXZlU3R1ZmYoYWN0aXZlRGl2KTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zZXRBY3RpdmVTdHVmZihhY3RpdmVMaSk7XG5cbiAgICAgICAgICAgICAgICAgICAgZS50YXJnZXQuY2xhc3NMaXN0LmFkZCgnYWN0aXZlJyk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5zbGlkZXJXcmFwLmFwcGVuZChkb2MpO1xuICAgIH1cblxuICAgIGhhbmRsZVNsaWRlcigpIFxuICAgIHtcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLnNsaWRlci5jaGlsZHJlbi5sZW5ndGg7IGkrKykgeyAgICAgICAgXG4gICAgICAgICAgICBsZXQgY2hpbGQgPSB0aGlzLnNsaWRlci5jaGlsZHJlbltpXTtcbiAgICAgICAgICAgIGxldCBpdGVtSGVpZ2h0ID0gY2hpbGQub2Zmc2V0SGVpZ2h0O1xuXG4gICAgICAgICAgICBpZiAoaXRlbUhlaWdodCA+IHRoaXMuaGVpZ2h0KSB7XG4gICAgICAgICAgICAgICAgdGhpcy5oZWlnaHQgPSBpdGVtSGVpZ2h0O1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBjaGlsZC5zdHlsZS5wb3NpdGlvbiA9ICdhYnNvbHV0ZSc7XG4gICAgICAgICAgICBjaGlsZC5jbGFzc0xpc3QuYWRkKCdzbGlkZXItY2hpbGQnKTtcbiAgICAgICAgICAgIGNoaWxkLmNsYXNzTGlzdC5hZGQoJ2FjdGl2ZScpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuc2xpZGVyLnN0eWxlLmhlaWdodCA9IHRoaXMuaGVpZ2h0ICsgJ3B4JztcbiAgICB9XG5cbiAgICBzZXRBY3RpdmVTdHVmZih0aGluZykgXG4gICAge1xuICAgICAgICBpZiAodGhpbmcpIHtcbiAgICAgICAgICAgIHRoaW5nLmZvckVhY2goKGRpdikgPT4ge1xuICAgICAgICAgICAgICAgIGRpdi5jbGFzc0xpc3QucmVtb3ZlKCdhY3RpdmUnKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfVxufVxubmV3IFNsaWRlcigpOyJdLCJzb3VyY2VSb290IjoiL3NvdXJjZS8ifQ==
