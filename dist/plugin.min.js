"use strict";function parallax(e,t){window.requestAnimationFrame(function(){var r=getElementOffset(t),a=r+t.offsetHeight;window.pageYOffset>r&&window.pageYOffset<a?e.style.transform="translate3d(0, "+.2*(window.pageYOffset-r)+"px, 0)":e.style.transform="translate3d(0, 0px, 0)"})}function getElementOffset(e){var t=0,r=e;do t+=r.offsetTop||0,r=r.offsetParent;while(r);return t}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var parallaxImgSection=document.querySelectorAll(".danzerpress-section .danzerpress-parallax"),parallaxImgTitle=document.querySelector(".danzerpress-title-area .danzerpress-parallax");parallaxImgSection.forEach(function(e){document.addEventListener("scroll",function(){parallax(e,e.closest(".danzerpress-section"))})}),parallaxImgTitle&&document.addEventListener("scroll",function(){parallax(parallaxImgTitle,parallaxImgTitle.closest(".danzerpress-title-area"))});var _createClass=function(){function e(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,r,a){return r&&e(t.prototype,r),a&&e(t,a),t}}(),Slider=function(){function e(){_classCallCheck(this,e),this.height=0,this.sliderNumber=3,this.sliderWrap=document.querySelector(".danzerpress-slider-wrap"),this.slider=document.querySelector(".danzerpress-slider"),this.slider&&(this.createPagination(),this.handleSlider())}return _createClass(e,[{key:"createPagination",value:function(){for(var e=this,t='\n            <div class="danzerpress-slider-pagination">\n                <ul>\n                </ul>\n            </div>\n        ',r=(new DOMParser).parseFromString(t,"text/html").body.firstChild,a=0;a<this.slider.children.length;a++)if(a>this.sliderNumber){var i=document.createElement("li");r.children[0].append(i),i.classList.add("active"),i.addEventListener("click",function(t){var r=document.querySelectorAll(".danzerpress-slider div.active"),a=document.querySelectorAll(".danzerpress-slider-pagination ul li");e.setActiveStuff(r),e.setActiveStuff(a),t.target.classList.add("active")})}this.sliderWrap.append(r)}},{key:"handleSlider",value:function(){for(var e=0;e<this.slider.children.length;e++){var t=this.slider.children[e],r=t.offsetHeight;r>this.height&&(this.height=r),t.style.position="absolute",t.classList.add("slider-child"),t.classList.add("active")}this.slider.style.height=this.height+"px"}},{key:"setActiveStuff",value:function(e){e&&e.forEach(function(e){e.classList.remove("active")})}}]),e}();new Slider;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1haW4uanMiLCJwYXJhbGxheC5qcyIsInNsaWRlci5qcyJdLCJuYW1lcyI6WyJwYXJhbGxheCIsInBhcmFsbGF4SW1nIiwic2VjdGlvblBhcmVudCIsIndpbmRvdyIsInJlcXVlc3RBbmltYXRpb25GcmFtZSIsInNlY3Rpb25QYXJlbnRUb3AiLCJnZXRFbGVtZW50T2Zmc2V0IiwicGFyZW50T2Zmc2V0Qm90dG9tIiwib2Zmc2V0SGVpZ2h0IiwicGFnZVlPZmZzZXQiLCJzdHlsZSIsInRyYW5zZm9ybSIsImVsIiwidG9wIiwiZWxlbWVudCIsIm9mZnNldFRvcCIsIm9mZnNldFBhcmVudCIsIl9jbGFzc0NhbGxDaGVjayIsImluc3RhbmNlIiwiQ29uc3RydWN0b3IiLCJUeXBlRXJyb3IiLCJwYXJhbGxheEltZ1NlY3Rpb24iLCJkb2N1bWVudCIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJwYXJhbGxheEltZ1RpdGxlIiwicXVlcnlTZWxlY3RvciIsImZvckVhY2giLCJhZGRFdmVudExpc3RlbmVyIiwiY2xvc2VzdCIsIl9jcmVhdGVDbGFzcyIsImRlZmluZVByb3BlcnRpZXMiLCJ0YXJnZXQiLCJwcm9wcyIsImkiLCJsZW5ndGgiLCJkZXNjcmlwdG9yIiwiZW51bWVyYWJsZSIsImNvbmZpZ3VyYWJsZSIsIndyaXRhYmxlIiwiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJrZXkiLCJwcm90b1Byb3BzIiwic3RhdGljUHJvcHMiLCJwcm90b3R5cGUiLCJTbGlkZXIiLCJ0aGlzIiwiaGVpZ2h0Iiwic2xpZGVyTnVtYmVyIiwic2xpZGVyV3JhcCIsInNsaWRlciIsImNyZWF0ZVBhZ2luYXRpb24iLCJoYW5kbGVTbGlkZXIiLCJ2YWx1ZSIsIl90aGlzIiwic2xpZGVyUGFnaW5hdGlvbiIsImRvYyIsIkRPTVBhcnNlciIsInBhcnNlRnJvbVN0cmluZyIsImJvZHkiLCJmaXJzdENoaWxkIiwiY2hpbGRyZW4iLCJidXR0b24iLCJjcmVhdGVFbGVtZW50IiwiYXBwZW5kIiwiY2xhc3NMaXN0IiwiYWRkIiwiZSIsImFjdGl2ZURpdiIsImFjdGl2ZUxpIiwic2V0QWN0aXZlU3R1ZmYiLCJjaGlsZCIsIml0ZW1IZWlnaHQiLCJwb3NpdGlvbiIsInRoaW5nIiwiZGl2IiwicmVtb3ZlIl0sIm1hcHBpbmdzIjoiQUFBQSxZQ2tCQSxTQUFTQSxVQUFTQyxFQUFhQyxHQUMzQkMsT0FBT0Msc0JBQXNCLFdBQ3pCLEdBQUlDLEdBQW1CQyxpQkFBaUJKLEdBQ3hDSyxFQUFxQkYsRUFBbUJILEVBQWNNLFlBRWxETCxRQUFPTSxZQUFjSixHQUFvQkYsT0FBT00sWUFBY0YsRUFDOUROLEVBQVlTLE1BQU1DLFVBQVksa0JBQStELElBQXpDUixPQUFPTSxZQUFjSixHQUEwQixTQUVuR0osRUFBWVMsTUFBTUMsVUFBWSwyQkFLMUMsUUFBU0wsa0JBQWlCTSxHQUN0QixHQUFJQyxHQUFNLEVBQ05DLEVBQVVGLENBSWQsR0FDSUMsSUFBT0MsRUFBUUMsV0FBYSxFQUM1QkQsRUFBVUEsRUFBUUUsbUJBQ2JGLEVBRVQsT0FBT0QsR0RTWCxRQUFTSSxpQkFBZ0JDLEVBQVVDLEdBQWUsS0FBTUQsWUFBb0JDLElBQWdCLEtBQU0sSUFBSUMsV0FBVSxxQ0NoRGhILEdBQUlDLG9CQUFxQkMsU0FBU0MsaUJBQWlCLDhDQUMvQ0MsaUJBQW1CRixTQUFTRyxjQUFjLGdEQUU5Q0osb0JBQW1CSyxRQUFRLFNBQUF6QixHQUN2QnFCLFNBQVNLLGlCQUFpQixTQUFVLFdBQ2hDM0IsU0FBU0MsRUFBYUEsRUFBWTJCLFFBQVEsNkJBSTlDSixrQkFDQUYsU0FBU0ssaUJBQWlCLFNBQVUsV0FDaEMzQixTQUFTd0IsaUJBQWtCQSxpQkFBaUJJLFFBQVEsNkJEbUM1RCxJQUFJQyxjQUFlLFdBQWMsUUFBU0MsR0FBaUJDLEVBQVFDLEdBQVMsSUFBSyxHQUFJQyxHQUFJLEVBQUdBLEVBQUlELEVBQU1FLE9BQVFELElBQUssQ0FBRSxHQUFJRSxHQUFhSCxFQUFNQyxFQUFJRSxHQUFXQyxXQUFhRCxFQUFXQyxhQUFjLEVBQU9ELEVBQVdFLGNBQWUsRUFBVSxTQUFXRixLQUFZQSxFQUFXRyxVQUFXLEdBQU1DLE9BQU9DLGVBQWVULEVBQVFJLEVBQVdNLElBQUtOLElBQWlCLE1BQU8sVUFBVWhCLEVBQWF1QixFQUFZQyxHQUFpSixNQUE5SEQsSUFBWVosRUFBaUJYLEVBQVl5QixVQUFXRixHQUFpQkMsR0FBYWIsRUFBaUJYLEVBQWF3QixHQUFxQnhCLE1FakQxaEIwQixPRnFETyxXRXBEVCxRQUFBQSxLQUNBNUIsZ0JBQUE2QixLQUFBRCxHQUNJQyxLQUFLQyxPQUFTLEVBQ2RELEtBQUtFLGFBQWUsRUFDcEJGLEtBQUtHLFdBQWEzQixTQUFTRyxjQUFjLDRCQUN6Q3FCLEtBQUtJLE9BQVM1QixTQUFTRyxjQUFjLHVCQUVoQ3FCLEtBQUtJLFNBR1ZKLEtBQUtLLG1CQUNMTCxLQUFLTSxnQkZpSFQsTUF4REF2QixjQUFhZ0IsSUFDVEosSUFBSyxtQkFDTFksTUFBTyxXRTlDUCxJQUFLLEdBVFRDLEdBQUFSLEtBQ1FTLEVBQUFBLHVJQU9BQyxHQUFNLEdBQUlDLFlBQVlDLGdCQUFnQkgsRUFBa0IsYUFBYUksS0FBS0MsV0FDckUzQixFQUFJLEVBQUdBLEVBQUlhLEtBQUtJLE9BQU9XLFNBQVMzQixPQUFRRCxJQUU3QyxHQUFJQSxFQUFJYSxLQUFLRSxhQUFjLENBQ3ZCLEdBQUljLEdBQVN4QyxTQUFTeUMsY0FBYyxLQUNwQ1AsR0FBSUssU0FBUyxHQUFHRyxPQUFPRixHQUN2QkEsRUFBT0csVUFBVUMsSUFBSSxVQUVyQkosRUFBT25DLGlCQUFpQixRQUFTLFNBQUN3QyxHQUM5QixHQUFJQyxHQUFZOUMsU0FBU0MsaUJBQWlCLGtDQUN0QzhDLEVBQVcvQyxTQUFTQyxpQkFBaUIsdUNBRXpDK0IsR0FBS2dCLGVBQWVGLEdBQ3BCZCxFQUFLZ0IsZUFBZUQsR0FFcEJGLEVBQUVwQyxPQUFPa0MsVUFBVUMsSUFBSSxZQUluQ3BCLEtBQUtHLFdBQVdlLE9BQU9SLE1GdUR2QmYsSUFBSyxlQUNMWSxNQUFPLFdFbkRQLElBQUssR0FBSXBCLEdBQUksRUFBR0EsRUFBSWEsS0FBS0ksT0FBT1csU0FBUzNCLE9BQVFELElBQUssQ0FDbEQsR0FBSXNDLEdBQVF6QixLQUFLSSxPQUFPVyxTQUFTNUIsR0FDN0J1QyxFQUFhRCxFQUFNL0QsWUFFbkJnRSxHQUFhMUIsS0FBS0MsU0FDbEJELEtBQUtDLE9BQVN5QixHQUdsQkQsRUFBTTdELE1BQU0rRCxTQUFXLFdBQ3ZCRixFQUFNTixVQUFVQyxJQUFJLGdCQUNwQkssRUFBTU4sVUFBVUMsSUFBSSxVQUV4QnBCLEtBQUtJLE9BQU94QyxNQUFNcUMsT0FBU0QsS0FBS0MsT0FBUyxRRnVEekNOLElBQUssaUJBQ0xZLE1BQU8sU0VyRElxQixHQUVQQSxHQUNBQSxFQUFNaEQsUUFBUSxTQUFDaUQsR0FDWEEsRUFBSVYsVUFBVVcsT0FBTyxnQkYwRDFCL0IsSUVyRFgsSUFBSUEiLCJmaWxlIjoibWFpbi5qcyIsInNvdXJjZXNDb250ZW50IjpbIid1c2Ugc3RyaWN0JztcblxuLyoqXG4gKiBQYXJhbGxheCBTY3JvbGxpbmdcbiAqL1xudmFyIHBhcmFsbGF4SW1nU2VjdGlvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5kYW56ZXJwcmVzcy1zZWN0aW9uIC5kYW56ZXJwcmVzcy1wYXJhbGxheCcpLFxuICAgIHBhcmFsbGF4SW1nVGl0bGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuZGFuemVycHJlc3MtdGl0bGUtYXJlYSAuZGFuemVycHJlc3MtcGFyYWxsYXgnKTtcblxucGFyYWxsYXhJbWdTZWN0aW9uLmZvckVhY2goZnVuY3Rpb24gKHBhcmFsbGF4SW1nKSB7XG4gICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcInNjcm9sbFwiLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHBhcmFsbGF4KHBhcmFsbGF4SW1nLCBwYXJhbGxheEltZy5jbG9zZXN0KCcuZGFuemVycHJlc3Mtc2VjdGlvbicpKTtcbiAgICB9KTtcbn0pO1xuXG5pZiAocGFyYWxsYXhJbWdUaXRsZSkge1xuICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJzY3JvbGxcIiwgZnVuY3Rpb24gKCkge1xuICAgICAgICBwYXJhbGxheChwYXJhbGxheEltZ1RpdGxlLCBwYXJhbGxheEltZ1RpdGxlLmNsb3Nlc3QoJy5kYW56ZXJwcmVzcy10aXRsZS1hcmVhJykpO1xuICAgIH0pO1xufVxuXG5mdW5jdGlvbiBwYXJhbGxheChwYXJhbGxheEltZywgc2VjdGlvblBhcmVudCkge1xuICAgIHdpbmRvdy5yZXF1ZXN0QW5pbWF0aW9uRnJhbWUoZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgc2VjdGlvblBhcmVudFRvcCA9IGdldEVsZW1lbnRPZmZzZXQoc2VjdGlvblBhcmVudCksXG4gICAgICAgICAgICBwYXJlbnRPZmZzZXRCb3R0b20gPSBzZWN0aW9uUGFyZW50VG9wICsgc2VjdGlvblBhcmVudC5vZmZzZXRIZWlnaHQ7XG5cbiAgICAgICAgaWYgKHdpbmRvdy5wYWdlWU9mZnNldCA+IHNlY3Rpb25QYXJlbnRUb3AgJiYgd2luZG93LnBhZ2VZT2Zmc2V0IDwgcGFyZW50T2Zmc2V0Qm90dG9tKSB7XG4gICAgICAgICAgICBwYXJhbGxheEltZy5zdHlsZS50cmFuc2Zvcm0gPSAndHJhbnNsYXRlM2QoMCwgJyArICh3aW5kb3cucGFnZVlPZmZzZXQgLSBzZWN0aW9uUGFyZW50VG9wKSAqIC4yICsgJ3B4LCAwKSc7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBwYXJhbGxheEltZy5zdHlsZS50cmFuc2Zvcm0gPSAndHJhbnNsYXRlM2QoMCwgMHB4LCAwKSc7XG4gICAgICAgIH1cbiAgICB9KTtcbn1cblxuZnVuY3Rpb24gZ2V0RWxlbWVudE9mZnNldChlbCkge1xuICAgIHZhciB0b3AgPSAwO1xuICAgIHZhciBlbGVtZW50ID0gZWw7XG5cbiAgICAvLyBMb29wIHRocm91Z2ggdGhlIERPTSB0cmVlXG4gICAgLy8gYW5kIGFkZCBpdCdzIHBhcmVudCdzIG9mZnNldCB0byBnZXQgcGFnZSBvZmZzZXRcbiAgICBkbyB7XG4gICAgICAgIHRvcCArPSBlbGVtZW50Lm9mZnNldFRvcCB8fCAwO1xuICAgICAgICBlbGVtZW50ID0gZWxlbWVudC5vZmZzZXRQYXJlbnQ7XG4gICAgfSB3aGlsZSAoZWxlbWVudCk7XG5cbiAgICByZXR1cm4gdG9wO1xufVxuXCJ1c2Ugc3RyaWN0XCI7XG4ndXNlIHN0cmljdCc7XG5cbnZhciBfY3JlYXRlQ2xhc3MgPSBmdW5jdGlvbiAoKSB7IGZ1bmN0aW9uIGRlZmluZVByb3BlcnRpZXModGFyZ2V0LCBwcm9wcykgeyBmb3IgKHZhciBpID0gMDsgaSA8IHByb3BzLmxlbmd0aDsgaSsrKSB7IHZhciBkZXNjcmlwdG9yID0gcHJvcHNbaV07IGRlc2NyaXB0b3IuZW51bWVyYWJsZSA9IGRlc2NyaXB0b3IuZW51bWVyYWJsZSB8fCBmYWxzZTsgZGVzY3JpcHRvci5jb25maWd1cmFibGUgPSB0cnVlOyBpZiAoXCJ2YWx1ZVwiIGluIGRlc2NyaXB0b3IpIGRlc2NyaXB0b3Iud3JpdGFibGUgPSB0cnVlOyBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBkZXNjcmlwdG9yLmtleSwgZGVzY3JpcHRvcik7IH0gfSByZXR1cm4gZnVuY3Rpb24gKENvbnN0cnVjdG9yLCBwcm90b1Byb3BzLCBzdGF0aWNQcm9wcykgeyBpZiAocHJvdG9Qcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvci5wcm90b3R5cGUsIHByb3RvUHJvcHMpOyBpZiAoc3RhdGljUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IsIHN0YXRpY1Byb3BzKTsgcmV0dXJuIENvbnN0cnVjdG9yOyB9OyB9KCk7XG5cbmZ1bmN0aW9uIF9jbGFzc0NhbGxDaGVjayhpbnN0YW5jZSwgQ29uc3RydWN0b3IpIHsgaWYgKCEoaW5zdGFuY2UgaW5zdGFuY2VvZiBDb25zdHJ1Y3RvcikpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvblwiKTsgfSB9XG5cbnZhciBTbGlkZXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgZnVuY3Rpb24gU2xpZGVyKCkge1xuICAgICAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgU2xpZGVyKTtcblxuICAgICAgICB0aGlzLmhlaWdodCA9IDA7XG4gICAgICAgIHRoaXMuc2xpZGVyTnVtYmVyID0gMztcbiAgICAgICAgdGhpcy5zbGlkZXJXcmFwID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmRhbnplcnByZXNzLXNsaWRlci13cmFwJyk7XG4gICAgICAgIHRoaXMuc2xpZGVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmRhbnplcnByZXNzLXNsaWRlcicpO1xuXG4gICAgICAgIGlmICghdGhpcy5zbGlkZXIpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmNyZWF0ZVBhZ2luYXRpb24oKTtcbiAgICAgICAgdGhpcy5oYW5kbGVTbGlkZXIoKTtcbiAgICB9XG5cbiAgICBfY3JlYXRlQ2xhc3MoU2xpZGVyLCBbe1xuICAgICAgICBrZXk6ICdjcmVhdGVQYWdpbmF0aW9uJyxcbiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIGNyZWF0ZVBhZ2luYXRpb24oKSB7XG4gICAgICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuXG4gICAgICAgICAgICB2YXIgc2xpZGVyUGFnaW5hdGlvbiA9ICdcXG4gICAgICAgICAgICA8ZGl2IGNsYXNzPVwiZGFuemVycHJlc3Mtc2xpZGVyLXBhZ2luYXRpb25cIj5cXG4gICAgICAgICAgICAgICAgPHVsPlxcbiAgICAgICAgICAgICAgICA8L3VsPlxcbiAgICAgICAgICAgIDwvZGl2PlxcbiAgICAgICAgJztcblxuICAgICAgICAgICAgdmFyIGRvYyA9IG5ldyBET01QYXJzZXIoKS5wYXJzZUZyb21TdHJpbmcoc2xpZGVyUGFnaW5hdGlvbiwgJ3RleHQvaHRtbCcpLmJvZHkuZmlyc3RDaGlsZDtcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5zbGlkZXIuY2hpbGRyZW4ubGVuZ3RoOyBpKyspIHtcblxuICAgICAgICAgICAgICAgIGlmIChpID4gdGhpcy5zbGlkZXJOdW1iZXIpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGJ1dHRvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2xpJyk7XG4gICAgICAgICAgICAgICAgICAgIGRvYy5jaGlsZHJlblswXS5hcHBlbmQoYnV0dG9uKTtcbiAgICAgICAgICAgICAgICAgICAgYnV0dG9uLmNsYXNzTGlzdC5hZGQoJ2FjdGl2ZScpO1xuXG4gICAgICAgICAgICAgICAgICAgIGJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgYWN0aXZlRGl2ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmRhbnplcnByZXNzLXNsaWRlciBkaXYuYWN0aXZlJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgYWN0aXZlTGkgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuZGFuemVycHJlc3Mtc2xpZGVyLXBhZ2luYXRpb24gdWwgbGknKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMuc2V0QWN0aXZlU3R1ZmYoYWN0aXZlRGl2KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzLnNldEFjdGl2ZVN0dWZmKGFjdGl2ZUxpKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgZS50YXJnZXQuY2xhc3NMaXN0LmFkZCgnYWN0aXZlJyk7XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMuc2xpZGVyV3JhcC5hcHBlbmQoZG9jKTtcbiAgICAgICAgfVxuICAgIH0sIHtcbiAgICAgICAga2V5OiAnaGFuZGxlU2xpZGVyJyxcbiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIGhhbmRsZVNsaWRlcigpIHtcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5zbGlkZXIuY2hpbGRyZW4ubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICB2YXIgY2hpbGQgPSB0aGlzLnNsaWRlci5jaGlsZHJlbltpXTtcbiAgICAgICAgICAgICAgICB2YXIgaXRlbUhlaWdodCA9IGNoaWxkLm9mZnNldEhlaWdodDtcblxuICAgICAgICAgICAgICAgIGlmIChpdGVtSGVpZ2h0ID4gdGhpcy5oZWlnaHQpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5oZWlnaHQgPSBpdGVtSGVpZ2h0O1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGNoaWxkLnN0eWxlLnBvc2l0aW9uID0gJ2Fic29sdXRlJztcbiAgICAgICAgICAgICAgICBjaGlsZC5jbGFzc0xpc3QuYWRkKCdzbGlkZXItY2hpbGQnKTtcbiAgICAgICAgICAgICAgICBjaGlsZC5jbGFzc0xpc3QuYWRkKCdhY3RpdmUnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMuc2xpZGVyLnN0eWxlLmhlaWdodCA9IHRoaXMuaGVpZ2h0ICsgJ3B4JztcbiAgICAgICAgfVxuICAgIH0sIHtcbiAgICAgICAga2V5OiAnc2V0QWN0aXZlU3R1ZmYnLFxuICAgICAgICB2YWx1ZTogZnVuY3Rpb24gc2V0QWN0aXZlU3R1ZmYodGhpbmcpIHtcbiAgICAgICAgICAgIGlmICh0aGluZykge1xuICAgICAgICAgICAgICAgIHRoaW5nLmZvckVhY2goZnVuY3Rpb24gKGRpdikge1xuICAgICAgICAgICAgICAgICAgICBkaXYuY2xhc3NMaXN0LnJlbW92ZSgnYWN0aXZlJyk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XSk7XG5cbiAgICByZXR1cm4gU2xpZGVyO1xufSgpO1xuXG5uZXcgU2xpZGVyKCk7IiwiLyoqXG4gKiBQYXJhbGxheCBTY3JvbGxpbmdcbiAqL1xudmFyIHBhcmFsbGF4SW1nU2VjdGlvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5kYW56ZXJwcmVzcy1zZWN0aW9uIC5kYW56ZXJwcmVzcy1wYXJhbGxheCcpLFxuICAgIHBhcmFsbGF4SW1nVGl0bGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuZGFuemVycHJlc3MtdGl0bGUtYXJlYSAuZGFuemVycHJlc3MtcGFyYWxsYXgnKTtcblxucGFyYWxsYXhJbWdTZWN0aW9uLmZvckVhY2gocGFyYWxsYXhJbWcgPT4ge1xuICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJzY3JvbGxcIiwgKCkgPT4ge1xuICAgICAgICBwYXJhbGxheChwYXJhbGxheEltZywgcGFyYWxsYXhJbWcuY2xvc2VzdCgnLmRhbnplcnByZXNzLXNlY3Rpb24nKSk7XG4gICAgfSk7XG59KTtcblxuaWYgKHBhcmFsbGF4SW1nVGl0bGUpIHtcbiAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwic2Nyb2xsXCIsICgpID0+IHtcbiAgICAgICAgcGFyYWxsYXgocGFyYWxsYXhJbWdUaXRsZSwgcGFyYWxsYXhJbWdUaXRsZS5jbG9zZXN0KCcuZGFuemVycHJlc3MtdGl0bGUtYXJlYScpKTtcbiAgICB9KTtcbn0gXG5cbmZ1bmN0aW9uIHBhcmFsbGF4KHBhcmFsbGF4SW1nLCBzZWN0aW9uUGFyZW50KSB7XG4gICAgd2luZG93LnJlcXVlc3RBbmltYXRpb25GcmFtZSgoKSA9PiB7XG4gICAgICAgIHZhciBzZWN0aW9uUGFyZW50VG9wID0gZ2V0RWxlbWVudE9mZnNldChzZWN0aW9uUGFyZW50KSxcbiAgICAgICAgcGFyZW50T2Zmc2V0Qm90dG9tID0gc2VjdGlvblBhcmVudFRvcCArIHNlY3Rpb25QYXJlbnQub2Zmc2V0SGVpZ2h0O1xuXG4gICAgICAgIGlmICh3aW5kb3cucGFnZVlPZmZzZXQgPiBzZWN0aW9uUGFyZW50VG9wICYmIHdpbmRvdy5wYWdlWU9mZnNldCA8IHBhcmVudE9mZnNldEJvdHRvbSkge1xuICAgICAgICAgICAgcGFyYWxsYXhJbWcuc3R5bGUudHJhbnNmb3JtID0gJ3RyYW5zbGF0ZTNkKDAsICcgKyAoKHdpbmRvdy5wYWdlWU9mZnNldCAtIHNlY3Rpb25QYXJlbnRUb3ApICogLjIpICsgJ3B4LCAwKSc7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBwYXJhbGxheEltZy5zdHlsZS50cmFuc2Zvcm0gPSAndHJhbnNsYXRlM2QoMCwgMHB4LCAwKSc7XG4gICAgICAgIH1cbiAgICB9KTtcbn1cblxuZnVuY3Rpb24gZ2V0RWxlbWVudE9mZnNldChlbCkge1xuICAgIGxldCB0b3AgPSAwO1xuICAgIGxldCBlbGVtZW50ID0gZWw7XG5cbiAgICAvLyBMb29wIHRocm91Z2ggdGhlIERPTSB0cmVlXG4gICAgLy8gYW5kIGFkZCBpdCdzIHBhcmVudCdzIG9mZnNldCB0byBnZXQgcGFnZSBvZmZzZXRcbiAgICBkbyB7XG4gICAgICAgIHRvcCArPSBlbGVtZW50Lm9mZnNldFRvcCB8fCAwO1xuICAgICAgICBlbGVtZW50ID0gZWxlbWVudC5vZmZzZXRQYXJlbnQ7XG4gICAgfSB3aGlsZSAoZWxlbWVudCk7XG5cbiAgICByZXR1cm4gdG9wO1xufSIsImNsYXNzIFNsaWRlciB7XG4gICAgY29uc3RydWN0b3IoKSBcbiAgICB7XG4gICAgICAgIHRoaXMuaGVpZ2h0ID0gMDtcbiAgICAgICAgdGhpcy5zbGlkZXJOdW1iZXIgPSAzO1xuICAgICAgICB0aGlzLnNsaWRlcldyYXAgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuZGFuemVycHJlc3Mtc2xpZGVyLXdyYXAnKTtcbiAgICAgICAgdGhpcy5zbGlkZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuZGFuemVycHJlc3Mtc2xpZGVyJyk7XG5cbiAgICAgICAgaWYgKCF0aGlzLnNsaWRlcikge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuY3JlYXRlUGFnaW5hdGlvbigpO1xuICAgICAgICB0aGlzLmhhbmRsZVNsaWRlcigpOyAgIFxuICAgIH1cblxuICAgIGNyZWF0ZVBhZ2luYXRpb24oKVxuICAgIHtcbiAgICAgICAgbGV0IHNsaWRlclBhZ2luYXRpb24gPSBgXG4gICAgICAgICAgICA8ZGl2IGNsYXNzPVwiZGFuemVycHJlc3Mtc2xpZGVyLXBhZ2luYXRpb25cIj5cbiAgICAgICAgICAgICAgICA8dWw+XG4gICAgICAgICAgICAgICAgPC91bD5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICBgO1xuXG4gICAgICAgIGxldCBkb2MgPSBuZXcgRE9NUGFyc2VyKCkucGFyc2VGcm9tU3RyaW5nKHNsaWRlclBhZ2luYXRpb24sICd0ZXh0L2h0bWwnKS5ib2R5LmZpcnN0Q2hpbGQ7XG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5zbGlkZXIuY2hpbGRyZW4ubGVuZ3RoOyBpKyspIHtcblxuICAgICAgICAgICAgaWYgKGkgPiB0aGlzLnNsaWRlck51bWJlcikge1xuICAgICAgICAgICAgICAgIGxldCBidXR0b24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdsaScpO1xuICAgICAgICAgICAgICAgIGRvYy5jaGlsZHJlblswXS5hcHBlbmQoYnV0dG9uKTtcbiAgICAgICAgICAgICAgICBidXR0b24uY2xhc3NMaXN0LmFkZCgnYWN0aXZlJyk7XG5cbiAgICAgICAgICAgICAgICBidXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBsZXQgYWN0aXZlRGl2ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmRhbnplcnByZXNzLXNsaWRlciBkaXYuYWN0aXZlJyk7XG4gICAgICAgICAgICAgICAgICAgIGxldCBhY3RpdmVMaSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5kYW56ZXJwcmVzcy1zbGlkZXItcGFnaW5hdGlvbiB1bCBsaScpO1xuXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc2V0QWN0aXZlU3R1ZmYoYWN0aXZlRGl2KTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zZXRBY3RpdmVTdHVmZihhY3RpdmVMaSk7XG5cbiAgICAgICAgICAgICAgICAgICAgZS50YXJnZXQuY2xhc3NMaXN0LmFkZCgnYWN0aXZlJyk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5zbGlkZXJXcmFwLmFwcGVuZChkb2MpO1xuICAgIH1cblxuICAgIGhhbmRsZVNsaWRlcigpIFxuICAgIHtcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLnNsaWRlci5jaGlsZHJlbi5sZW5ndGg7IGkrKykgeyAgICAgICAgXG4gICAgICAgICAgICBsZXQgY2hpbGQgPSB0aGlzLnNsaWRlci5jaGlsZHJlbltpXTtcbiAgICAgICAgICAgIGxldCBpdGVtSGVpZ2h0ID0gY2hpbGQub2Zmc2V0SGVpZ2h0O1xuXG4gICAgICAgICAgICBpZiAoaXRlbUhlaWdodCA+IHRoaXMuaGVpZ2h0KSB7XG4gICAgICAgICAgICAgICAgdGhpcy5oZWlnaHQgPSBpdGVtSGVpZ2h0O1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBjaGlsZC5zdHlsZS5wb3NpdGlvbiA9ICdhYnNvbHV0ZSc7XG4gICAgICAgICAgICBjaGlsZC5jbGFzc0xpc3QuYWRkKCdzbGlkZXItY2hpbGQnKTtcbiAgICAgICAgICAgIGNoaWxkLmNsYXNzTGlzdC5hZGQoJ2FjdGl2ZScpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuc2xpZGVyLnN0eWxlLmhlaWdodCA9IHRoaXMuaGVpZ2h0ICsgJ3B4JztcbiAgICB9XG5cbiAgICBzZXRBY3RpdmVTdHVmZih0aGluZykgXG4gICAge1xuICAgICAgICBpZiAodGhpbmcpIHtcbiAgICAgICAgICAgIHRoaW5nLmZvckVhY2goKGRpdikgPT4ge1xuICAgICAgICAgICAgICAgIGRpdi5jbGFzc0xpc3QucmVtb3ZlKCdhY3RpdmUnKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfVxufVxubmV3IFNsaWRlcigpOyJdLCJzb3VyY2VSb290IjoiL3NvdXJjZS8ifQ==
